<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 10 Subsetting Data | Modeling the World with R</title>
  <meta name="description" content="This book provides a gentle yet comprehensive introduction to doing basic statistics in R." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 10 Subsetting Data | Modeling the World with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book provides a gentle yet comprehensive introduction to doing basic statistics in R." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 10 Subsetting Data | Modeling the World with R" />
  
  <meta name="twitter:description" content="This book provides a gentle yet comprehensive introduction to doing basic statistics in R." />
  

<meta name="author" content="Kenneth Blake Vernon" />


<meta name="date" content="2021-02-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="workspace-management.html"/>
<link rel="next" href="transforming-data.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Modeling the World with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path="acknowledgments.html"><a href="acknowledgments.html"><i class="fa fa-check"></i>Acknowledgments</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#who-is-this-bookdown-for"><i class="fa fa-check"></i><b>1.1</b> Who is this bookdown for?</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#why-this-bookdown-project"><i class="fa fa-check"></i><b>1.2</b> Why this bookdown project?</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#pedagogy"><i class="fa fa-check"></i><b>1.3</b> Pedagogy</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#the-abelson-principle"><i class="fa fa-check"></i><b>1.4</b> The Abelson Principle</a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#book-layout"><i class="fa fa-check"></i><b>1.5</b> Book layout</a><ul>
<li class="chapter" data-level="1.5.1" data-path="intro.html"><a href="intro.html#chapter-overviews"><i class="fa fa-check"></i><b>1.5.1</b> Chapter overviews</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="intro.html"><a href="intro.html#r-code-formatting"><i class="fa fa-check"></i><b>1.6</b> R code formatting</a></li>
<li class="chapter" data-level="1.7" data-path="intro.html"><a href="intro.html#exercises-and-data"><i class="fa fa-check"></i><b>1.7</b> Exercises and data</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html"><i class="fa fa-check"></i><b>2</b> R and RStudio</a><ul>
<li class="chapter" data-level="2.1" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#what-is-r"><i class="fa fa-check"></i><b>2.1</b> What is R?</a><ul>
<li class="chapter" data-level="2.1.1" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#the-r-environment"><i class="fa fa-check"></i><b>2.1.1</b> The R Environment</a></li>
<li class="chapter" data-level="2.1.2" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#the-r-language"><i class="fa fa-check"></i><b>2.1.2</b> The R Language</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#why-r"><i class="fa fa-check"></i><b>2.2</b> Why R?</a><ul>
<li class="chapter" data-level="2.2.1" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#its-free"><i class="fa fa-check"></i><b>2.2.1</b> It’s free!</a></li>
<li class="chapter" data-level="2.2.2" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#its-statistics-made-easy"><i class="fa fa-check"></i><b>2.2.2</b> It’s statistics made easy</a></li>
<li class="chapter" data-level="2.2.3" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#its-pretty-figures"><i class="fa fa-check"></i><b>2.2.3</b> It’s pretty figures</a></li>
<li class="chapter" data-level="2.2.4" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#its-reproducible"><i class="fa fa-check"></i><b>2.2.4</b> It’s reproducible</a></li>
<li class="chapter" data-level="2.2.5" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#its-an-active-community"><i class="fa fa-check"></i><b>2.2.5</b> It’s an active community</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#rstudio"><i class="fa fa-check"></i><b>2.3</b> RStudio</a><ul>
<li class="chapter" data-level="2.3.1" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#pane-layout"><i class="fa fa-check"></i><b>2.3.1</b> Pane layout</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="example-workflow.html"><a href="example-workflow.html"><i class="fa fa-check"></i><b>3</b> An Example Workflow</a><ul>
<li class="chapter" data-level="3.1" data-path="example-workflow.html"><a href="example-workflow.html#in-fits-and-starts"><i class="fa fa-check"></i><b>3.1</b> In fits and starts</a></li>
<li class="chapter" data-level="3.2" data-path="example-workflow.html"><a href="example-workflow.html#the-whole-shebang"><i class="fa fa-check"></i><b>3.2</b> The whole shebang</a><ul>
<li class="chapter" data-level="3.2.1" data-path="example-workflow.html"><a href="example-workflow.html#load-data"><i class="fa fa-check"></i><b>3.2.1</b> Load data</a></li>
<li class="chapter" data-level="3.2.2" data-path="example-workflow.html"><a href="example-workflow.html#do-grunt-work"><i class="fa fa-check"></i><b>3.2.2</b> Do grunt work</a></li>
<li class="chapter" data-level="3.2.3" data-path="example-workflow.html"><a href="example-workflow.html#do-fun-stuff"><i class="fa fa-check"></i><b>3.2.3</b> Do fun stuff</a></li>
<li class="chapter" data-level="3.2.4" data-path="example-workflow.html"><a href="example-workflow.html#export-results"><i class="fa fa-check"></i><b>3.2.4</b> Export results</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="looking-for-help.html"><a href="looking-for-help.html"><i class="fa fa-check"></i><b>4</b> Looking for Help</a><ul>
<li class="chapter" data-level="4.1" data-path="looking-for-help.html"><a href="looking-for-help.html#the-google-search-paradox"><i class="fa fa-check"></i><b>4.1</b> The Google Search Paradox</a></li>
<li class="chapter" data-level="4.2" data-path="looking-for-help.html"><a href="looking-for-help.html#helpful-helpers"><i class="fa fa-check"></i><b>4.2</b> Helpful helpers</a><ul>
<li class="chapter" data-level="4.2.1" data-path="looking-for-help.html"><a href="looking-for-help.html#r"><i class="fa fa-check"></i><b>4.2.1</b> R</a></li>
<li class="chapter" data-level="4.2.2" data-path="looking-for-help.html"><a href="looking-for-help.html#rstudio-help"><i class="fa fa-check"></i><b>4.2.2</b> RStudio</a></li>
<li class="chapter" data-level="4.2.3" data-path="looking-for-help.html"><a href="looking-for-help.html#r-community"><i class="fa fa-check"></i><b>4.2.3</b> R Community</a></li>
<li class="chapter" data-level="4.2.4" data-path="looking-for-help.html"><a href="looking-for-help.html#other-resources"><i class="fa fa-check"></i><b>4.2.4</b> Other Resources</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="looking-for-help.html"><a href="looking-for-help.html#reproducible-examples"><i class="fa fa-check"></i><b>4.3</b> Reproducible examples</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="r-style-guide.html"><a href="r-style-guide.html"><i class="fa fa-check"></i><b>5</b> R Style Guide</a><ul>
<li class="chapter" data-level="5.1" data-path="r-style-guide.html"><a href="r-style-guide.html#abelson-again"><i class="fa fa-check"></i><b>5.1</b> Abelson again</a></li>
<li class="chapter" data-level="5.2" data-path="r-style-guide.html"><a href="r-style-guide.html#be-verbose"><i class="fa fa-check"></i><b>5.2</b> Be verbose!</a><ul>
<li class="chapter" data-level="5.2.1" data-path="r-style-guide.html"><a href="r-style-guide.html#object-names"><i class="fa fa-check"></i><b>5.2.1</b> Object names</a></li>
<li class="chapter" data-level="5.2.2" data-path="r-style-guide.html"><a href="r-style-guide.html#function-parameters"><i class="fa fa-check"></i><b>5.2.2</b> Function parameters</a></li>
<li class="chapter" data-level="5.2.3" data-path="r-style-guide.html"><a href="r-style-guide.html#code-commenting"><i class="fa fa-check"></i><b>5.2.3</b> Code commenting</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="r-style-guide.html"><a href="r-style-guide.html#dont-repeat-yourself-dry"><i class="fa fa-check"></i><b>5.3</b> Don’t Repeat Yourself (DRY)</a></li>
<li class="chapter" data-level="5.4" data-path="r-style-guide.html"><a href="r-style-guide.html#assignment-first"><i class="fa fa-check"></i><b>5.4</b> Assignment first</a></li>
<li class="chapter" data-level="5.5" data-path="r-style-guide.html"><a href="r-style-guide.html#the-cratylus-rule"><i class="fa fa-check"></i><b>5.5</b> The Cratylus Rule</a></li>
<li class="chapter" data-level="5.6" data-path="r-style-guide.html"><a href="r-style-guide.html#empty-nests"><i class="fa fa-check"></i><b>5.6</b> Empty nests!</a></li>
<li class="chapter" data-level="5.7" data-path="r-style-guide.html"><a href="r-style-guide.html#be-open"><i class="fa fa-check"></i><b>5.7</b> Be open</a><ul>
<li class="chapter" data-level="5.7.1" data-path="r-style-guide.html"><a href="r-style-guide.html#spacing"><i class="fa fa-check"></i><b>5.7.1</b> Spacing</a></li>
<li class="chapter" data-level="5.7.2" data-path="r-style-guide.html"><a href="r-style-guide.html#line-length"><i class="fa fa-check"></i><b>5.7.2</b> Line Length</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="r-style-guide.html"><a href="r-style-guide.html#be-organized"><i class="fa fa-check"></i><b>5.8</b> Be organized</a></li>
</ul></li>
<li class="part"><span><b>I Introduction to R</b></span></li>
<li class="chapter" data-level="6" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>6</b> R Basics</a><ul>
<li class="chapter" data-level="6.1" data-path="r-basics.html"><a href="r-basics.html#overview"><i class="fa fa-check"></i><b>6.1</b> Overview</a></li>
<li class="chapter" data-level="6.2" data-path="r-basics.html"><a href="r-basics.html#a-glorified-calculator"><i class="fa fa-check"></i><b>6.2</b> A Glorified Calculator?</a></li>
<li class="chapter" data-level="6.3" data-path="r-basics.html"><a href="r-basics.html#objects-and-functions"><i class="fa fa-check"></i><b>6.3</b> Objects and Functions</a><ul>
<li class="chapter" data-level="6.3.1" data-path="r-basics.html"><a href="r-basics.html#creating-objects-with-assignment"><i class="fa fa-check"></i><b>6.3.1</b> Creating objects with assignment</a></li>
<li class="chapter" data-level="6.3.2" data-path="r-basics.html"><a href="r-basics.html#doing-things-with-functions"><i class="fa fa-check"></i><b>6.3.2</b> Doing things with functions</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="r-basics.html"><a href="r-basics.html#vectorized-functions"><i class="fa fa-check"></i><b>6.4</b> Vectorized Functions</a></li>
<li class="chapter" data-level="6.5" data-path="r-basics.html"><a href="r-basics.html#console-and-scripts"><i class="fa fa-check"></i><b>6.5</b> Console and Scripts</a><ul>
<li class="chapter" data-level="6.5.1" data-path="r-basics.html"><a href="r-basics.html#r-console"><i class="fa fa-check"></i><b>6.5.1</b> R Console</a></li>
<li class="chapter" data-level="6.5.2" data-path="r-basics.html"><a href="r-basics.html#r-scripts"><i class="fa fa-check"></i><b>6.5.2</b> R Scripts</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="r-basics.html"><a href="r-basics.html#packages-in-the-r-library"><i class="fa fa-check"></i><b>6.6</b> Packages in the R Library</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="statistical-graphics.html"><a href="statistical-graphics.html"><i class="fa fa-check"></i><b>7</b> Statistical Graphics</a><ul>
<li class="chapter" data-level="7.1" data-path="statistical-graphics.html"><a href="statistical-graphics.html#overview-1"><i class="fa fa-check"></i><b>7.1</b> Overview</a></li>
<li class="chapter" data-level="7.2" data-path="statistical-graphics.html"><a href="statistical-graphics.html#plot-anatomy"><i class="fa fa-check"></i><b>7.2</b> Plot anatomy</a><ul>
<li class="chapter" data-level="7.2.1" data-path="statistical-graphics.html"><a href="statistical-graphics.html#region"><i class="fa fa-check"></i><b>7.2.1</b> Region</a></li>
<li class="chapter" data-level="7.2.2" data-path="statistical-graphics.html"><a href="statistical-graphics.html#sides"><i class="fa fa-check"></i><b>7.2.2</b> Sides</a></li>
<li class="chapter" data-level="7.2.3" data-path="statistical-graphics.html"><a href="statistical-graphics.html#axes"><i class="fa fa-check"></i><b>7.2.3</b> Axes</a></li>
<li class="chapter" data-level="7.2.4" data-path="statistical-graphics.html"><a href="statistical-graphics.html#titles"><i class="fa fa-check"></i><b>7.2.4</b> Titles</a></li>
<li class="chapter" data-level="7.2.5" data-path="statistical-graphics.html"><a href="statistical-graphics.html#margins"><i class="fa fa-check"></i><b>7.2.5</b> Margins</a></li>
<li class="chapter" data-level="7.2.6" data-path="statistical-graphics.html"><a href="statistical-graphics.html#legend"><i class="fa fa-check"></i><b>7.2.6</b> Legend</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="statistical-graphics.html"><a href="statistical-graphics.html#plot-function"><i class="fa fa-check"></i><b>7.3</b> The <code>plot()</code> Function</a><ul>
<li class="chapter" data-level="7.3.1" data-path="statistical-graphics.html"><a href="statistical-graphics.html#plot-type"><i class="fa fa-check"></i><b>7.3.1</b> Plot type</a></li>
<li class="chapter" data-level="7.3.2" data-path="statistical-graphics.html"><a href="statistical-graphics.html#plot-limits"><i class="fa fa-check"></i><b>7.3.2</b> Plot limits</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="statistical-graphics.html"><a href="statistical-graphics.html#layering"><i class="fa fa-check"></i><b>7.4</b> Layering</a></li>
<li class="chapter" data-level="7.5" data-path="statistical-graphics.html"><a href="statistical-graphics.html#annotation"><i class="fa fa-check"></i><b>7.5</b> Annotation</a></li>
<li class="chapter" data-level="7.6" data-path="statistical-graphics.html"><a href="statistical-graphics.html#graphical-parameters"><i class="fa fa-check"></i><b>7.6</b> Graphical parameters</a><ul>
<li class="chapter" data-level="7.6.1" data-path="statistical-graphics.html"><a href="statistical-graphics.html#region-1"><i class="fa fa-check"></i><b>7.6.1</b> Region</a></li>
<li class="chapter" data-level="7.6.2" data-path="statistical-graphics.html"><a href="statistical-graphics.html#geometry"><i class="fa fa-check"></i><b>7.6.2</b> Geometry</a></li>
<li class="chapter" data-level="7.6.3" data-path="statistical-graphics.html"><a href="statistical-graphics.html#text"><i class="fa fa-check"></i><b>7.6.3</b> Text</a></li>
<li class="chapter" data-level="7.6.4" data-path="statistical-graphics.html"><a href="statistical-graphics.html#color"><i class="fa fa-check"></i><b>7.6.4</b> Color</a></li>
<li class="chapter" data-level="7.6.5" data-path="statistical-graphics.html"><a href="statistical-graphics.html#size"><i class="fa fa-check"></i><b>7.6.5</b> Size</a></li>
<li class="chapter" data-level="7.6.6" data-path="statistical-graphics.html"><a href="statistical-graphics.html#margin"><i class="fa fa-check"></i><b>7.6.6</b> Margin</a></li>
<li class="chapter" data-level="7.6.7" data-path="statistical-graphics.html"><a href="statistical-graphics.html#layout"><i class="fa fa-check"></i><b>7.6.7</b> Layout</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="statistical-graphics.html"><a href="statistical-graphics.html#saving-figures"><i class="fa fa-check"></i><b>7.7</b> Saving figures</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="vector-types.html"><a href="vector-types.html"><i class="fa fa-check"></i><b>8</b> Vector Types</a><ul>
<li class="chapter" data-level="8.1" data-path="vector-types.html"><a href="vector-types.html#overview-2"><i class="fa fa-check"></i><b>8.1</b> Overview</a></li>
<li class="chapter" data-level="8.2" data-path="vector-types.html"><a href="vector-types.html#data-types"><i class="fa fa-check"></i><b>8.2</b> Data types</a><ul>
<li class="chapter" data-level="8.2.1" data-path="vector-types.html"><a href="vector-types.html#integer"><i class="fa fa-check"></i><b>8.2.1</b> Integer</a></li>
<li class="chapter" data-level="8.2.2" data-path="vector-types.html"><a href="vector-types.html#double"><i class="fa fa-check"></i><b>8.2.2</b> Double</a></li>
<li class="chapter" data-level="8.2.3" data-path="vector-types.html"><a href="vector-types.html#character"><i class="fa fa-check"></i><b>8.2.3</b> Character</a></li>
<li class="chapter" data-level="8.2.4" data-path="vector-types.html"><a href="vector-types.html#logical"><i class="fa fa-check"></i><b>8.2.4</b> Logical</a></li>
<li class="chapter" data-level="8.2.5" data-path="vector-types.html"><a href="vector-types.html#factors"><i class="fa fa-check"></i><b>8.2.5</b> Factors</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="vector-types.html"><a href="vector-types.html#vector-types-1"><i class="fa fa-check"></i><b>8.3</b> Vector types</a><ul>
<li class="chapter" data-level="8.3.1" data-path="vector-types.html"><a href="vector-types.html#scalar"><i class="fa fa-check"></i><b>8.3.1</b> Scalar</a></li>
<li class="chapter" data-level="8.3.2" data-path="vector-types.html"><a href="vector-types.html#vector"><i class="fa fa-check"></i><b>8.3.2</b> Vector</a></li>
<li class="chapter" data-level="8.3.3" data-path="vector-types.html"><a href="vector-types.html#matrix"><i class="fa fa-check"></i><b>8.3.3</b> Matrix</a></li>
<li class="chapter" data-level="8.3.4" data-path="vector-types.html"><a href="vector-types.html#list"><i class="fa fa-check"></i><b>8.3.4</b> List</a></li>
<li class="chapter" data-level="8.3.5" data-path="vector-types.html"><a href="vector-types.html#data.frame"><i class="fa fa-check"></i><b>8.3.5</b> Data.frame</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="vector-types.html"><a href="vector-types.html#vector-display"><i class="fa fa-check"></i><b>8.4</b> Vector display</a></li>
<li class="chapter" data-level="8.5" data-path="vector-types.html"><a href="vector-types.html#coercion"><i class="fa fa-check"></i><b>8.5</b> Coercion</a><ul>
<li class="chapter" data-level="8.5.1" data-path="vector-types.html"><a href="vector-types.html#data-type-coercion"><i class="fa fa-check"></i><b>8.5.1</b> Data type coercion</a></li>
<li class="chapter" data-level="8.5.2" data-path="vector-types.html"><a href="vector-types.html#vector-type-coercion"><i class="fa fa-check"></i><b>8.5.2</b> Vector type coercion</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="workspace-management.html"><a href="workspace-management.html"><i class="fa fa-check"></i><b>9</b> Workspace Management</a><ul>
<li class="chapter" data-level="9.1" data-path="workspace-management.html"><a href="workspace-management.html#overview-3"><i class="fa fa-check"></i><b>9.1</b> Overview</a></li>
<li class="chapter" data-level="9.2" data-path="workspace-management.html"><a href="workspace-management.html#the-workspace"><i class="fa fa-check"></i><b>9.2</b> The workspace</a><ul>
<li class="chapter" data-level="9.2.1" data-path="workspace-management.html"><a href="workspace-management.html#workspace-management-1"><i class="fa fa-check"></i><b>9.2.1</b> Workspace management</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="workspace-management.html"><a href="workspace-management.html#the-working-directory"><i class="fa fa-check"></i><b>9.3</b> The working directory</a><ul>
<li class="chapter" data-level="9.3.1" data-path="workspace-management.html"><a href="workspace-management.html#file-paths"><i class="fa fa-check"></i><b>9.3.1</b> File paths</a></li>
<li class="chapter" data-level="9.3.2" data-path="workspace-management.html"><a href="workspace-management.html#setting-the-working-directory"><i class="fa fa-check"></i><b>9.3.2</b> Setting the working directory</a></li>
<li class="chapter" data-level="9.3.3" data-path="workspace-management.html"><a href="workspace-management.html#reproducible-projects"><i class="fa fa-check"></i><b>9.3.3</b> Reproducible projects</a></li>
<li class="chapter" data-level="9.3.4" data-path="workspace-management.html"><a href="workspace-management.html#directory-management"><i class="fa fa-check"></i><b>9.3.4</b> Directory management</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="workspace-management.html"><a href="workspace-management.html#data-import-and-export"><i class="fa fa-check"></i><b>9.4</b> Data Import and Export</a><ul>
<li class="chapter" data-level="9.4.1" data-path="workspace-management.html"><a href="workspace-management.html#read-and-write-tables"><i class="fa fa-check"></i><b>9.4.1</b> Read and write tables</a></li>
<li class="chapter" data-level="9.4.2" data-path="workspace-management.html"><a href="workspace-management.html#read-and-save-objects"><i class="fa fa-check"></i><b>9.4.2</b> Read and save objects</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="subsetting-data.html"><a href="subsetting-data.html"><i class="fa fa-check"></i><b>10</b> Subsetting Data</a><ul>
<li class="chapter" data-level="10.1" data-path="subsetting-data.html"><a href="subsetting-data.html#overview-4"><i class="fa fa-check"></i><b>10.1</b> Overview</a></li>
<li class="chapter" data-level="10.2" data-path="subsetting-data.html"><a href="subsetting-data.html#selecting-variables"><i class="fa fa-check"></i><b>10.2</b> Selecting variables</a></li>
<li class="chapter" data-level="10.3" data-path="subsetting-data.html"><a href="subsetting-data.html#filtering-observations"><i class="fa fa-check"></i><b>10.3</b> Filtering observations</a><ul>
<li class="chapter" data-level="10.3.1" data-path="subsetting-data.html"><a href="subsetting-data.html#multiple-conditions"><i class="fa fa-check"></i><b>10.3.1</b> Multiple conditions</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="subsetting-data.html"><a href="subsetting-data.html#filtering-and-selecting"><i class="fa fa-check"></i><b>10.4</b> Filtering and selecting</a></li>
<li class="chapter" data-level="10.5" data-path="subsetting-data.html"><a href="subsetting-data.html#formiddable-subsetting"><i class="fa fa-check"></i><b>10.5</b> Formiddable subsetting</a></li>
<li class="chapter" data-level="10.6" data-path="subsetting-data.html"><a href="subsetting-data.html#index-vectors"><i class="fa fa-check"></i><b>10.6</b> Index vectors</a><ul>
<li class="chapter" data-level="10.6.1" data-path="subsetting-data.html"><a href="subsetting-data.html#integer-index"><i class="fa fa-check"></i><b>10.6.1</b> Integer index</a></li>
<li class="chapter" data-level="10.6.2" data-path="subsetting-data.html"><a href="subsetting-data.html#character-index"><i class="fa fa-check"></i><b>10.6.2</b> Character index</a></li>
<li class="chapter" data-level="10.6.3" data-path="subsetting-data.html"><a href="subsetting-data.html#logical-index"><i class="fa fa-check"></i><b>10.6.3</b> Logical index</a></li>
<li class="chapter" data-level="10.6.4" data-path="subsetting-data.html"><a href="subsetting-data.html#empty-index"><i class="fa fa-check"></i><b>10.6.4</b> Empty index</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="subsetting-data.html"><a href="subsetting-data.html#subset-output"><i class="fa fa-check"></i><b>10.7</b> Subset output</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="transforming-data.html"><a href="transforming-data.html"><i class="fa fa-check"></i><b>11</b> Transforming data</a><ul>
<li class="chapter" data-level="11.1" data-path="transforming-data.html"><a href="transforming-data.html#overview-5"><i class="fa fa-check"></i><b>11.1</b> Overview</a></li>
<li class="chapter" data-level="11.2" data-path="transforming-data.html"><a href="transforming-data.html#order"><i class="fa fa-check"></i><b>11.2</b> Order</a><ul>
<li class="chapter" data-level="11.2.1" data-path="transforming-data.html"><a href="transforming-data.html#change"><i class="fa fa-check"></i><b>11.2.1</b> Change</a></li>
<li class="chapter" data-level="11.2.2" data-path="transforming-data.html"><a href="transforming-data.html#combine"><i class="fa fa-check"></i><b>11.2.2</b> Combine</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Introduction to Statistics</b></span></li>
<li class="chapter" data-level="12" data-path="whatisstats.html"><a href="whatisstats.html"><i class="fa fa-check"></i><b>12</b> What is Statistics?</a></li>
<li class="chapter" data-level="13" data-path="univariate-description.html"><a href="univariate-description.html"><i class="fa fa-check"></i><b>13</b> Univariate Description</a></li>
<li class="chapter" data-level="14" data-path="probability-distributions.html"><a href="probability-distributions.html"><i class="fa fa-check"></i><b>14</b> Probability Distributions</a></li>
<li class="chapter" data-level="15" data-path="inference-tests.html"><a href="inference-tests.html"><i class="fa fa-check"></i><b>15</b> Inference Tests</a></li>
<li class="chapter" data-level="16" data-path="multivariate-description.html"><a href="multivariate-description.html"><i class="fa fa-check"></i><b>16</b> Multivariate Description</a></li>
<li class="chapter" data-level="17" data-path="ols.html"><a href="ols.html"><i class="fa fa-check"></i><b>17</b> Linear Models</a></li>
<li class="chapter" data-level="18" data-path="model-diagnostics.html"><a href="model-diagnostics.html"><i class="fa fa-check"></i><b>18</b> Model Diagnostics</a></li>
<li class="chapter" data-level="19" data-path="glm.html"><a href="glm.html"><i class="fa fa-check"></i><b>19</b> Generalized Linear Models</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Modeling the World with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="subsetting-data" class="section level1">
<h1><span class="header-section-number">Chapter 10</span> Subsetting Data</h1>
<!-- include libraries -->
<!-- kableExtra bootstrap css 
https://haozhu233.github.io/kableExtra/bookdown/use-bootstrap-tables-in-gitbooks-epub.html
-->
<!-- knit_hook: collapse and strip white 
this is a Blake hack -->
<!-- knit_hook: collapse and print error red
super hacky, see here: https://stackoverflow.com/a/54985678/7705429
we'll need to be careful to not string four # together anywhere
--->
<script>
$(document).ready(function() {
  window.setTimeout(function() {
    $(".co:contains('####')").css("color", "red");
    var tmp = $(".co:contains('####')").text();
    $(".co:contains('####')").text(tmp.replace("####", "##"));
  }, 15);
});
</script>
<!-- chunk options -->
<!-- miscellaneous -->
<!-- 
make error messages closer to base R 
https://github.com/hadley/adv-r/blob/master/common.R
looks like it doesn't work because R no longer
let's users override s3 methods, so I changed the s3 to "simpleError"
-->
<div id="overview-4" class="section level2">
<h2><span class="header-section-number">10.1</span> Overview</h2>
<table class="table-intro table table-hover table-striped" style="margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:left;border: 0 solid transparent; padding-right: 0px; vertical-align: top;">
<strong>Goal</strong>
</td>
<td style="text-align:left;border: 0 solid transparent; padding-left: 9px; text-align: justify; text-justify: inter-word;">
To understand how to subset data in R.
</td>
</tr>
<tr>
<td style="text-align:left;border: 0 solid transparent; padding-right: 0px; vertical-align: top;">
<strong>tl;dr</strong>
</td>
<td style="text-align:left;border: 0 solid transparent; padding-left: 9px; text-align: justify; text-justify: inter-word;">
Like eating only the green M&amp;Ms. 
</td>
</tr>
<tr>
<td style="text-align:left;border: 0 solid transparent; padding-right: 0px; vertical-align: top;">
<strong>Outcomes</strong>
</td>
<td style="text-align:left;border: 0 solid transparent; padding-left: 9px; text-align: justify; text-justify: inter-word;">
Here, you will learn about<br>
<ol>
<li>
the friendly <code>subset()</code> function and
</li>
<li>
the foreboding subset operators <code>[</code> and <code>$</code>.
</li>
</ol>
</td>
</tr>
<tr>
<td style="text-align:left;border: 0 solid transparent; padding-right: 0px; vertical-align: top;">
<strong>Datasets</strong>
</td>
<td style="text-align:left;border: 0 solid transparent; padding-left: 9px; text-align: justify; text-justify: inter-word;">
<a href="https://allisonhorst.github.io/palmerpenguins/">Palmer Penguins</a> <span class="citation">(Horst, Hill, and Gorman <a href="#ref-horst2020palmer" role="doc-biblioref">2020</a>)</span>
</td>
</tr>
<tr>
<td style="text-align:left;border: 0 solid transparent; padding-right: 0px; vertical-align: top;">
<strong>Requirements</strong>
</td>
<td style="text-align:left;border: 0 solid transparent; padding-left: 9px; text-align: justify; text-justify: inter-word;">
<a href="r-basics.html#r-basics">Chapter 6: R Basics</a>
</td>
</tr>
<tr>
<td style="text-align:left;border: 0 solid transparent; padding-right: 0px; vertical-align: top;">
<strong>Further Reading</strong>
</td>
<td style="text-align:left;border: 0 solid transparent; padding-left: 9px; text-align: justify; text-justify: inter-word;">
NONE
</td>
</tr>
</tbody>
</table>
<p>Consider these three scenarios:</p>
<ul>
<li>You have a global dataset detailing movie theater attendance rates, along with movie genre and director, for the last decade, but you only want to compare general attendance trends in Brazil to those in, say, France.<br />
</li>
<li>You have an enormous pollen record for Western North America going back some 15,000 years, but you’re only interested in the terminal Pleistocene (approximately 11,000 to 10,000 years ago).<br />
</li>
<li>You have measurements of multiple penguin traits across several species, but you only want to model the relationship of bill length to body mass for Adelie penguins living on Torgersen Island.</li>
</ul>
<p>In all of these scenarios, you are required to extract from the total data just the portion relevant to your specific research question. This is known as <em>subsetting</em>. It comes in two primary flavors: (i) <em>selecting variables</em> or columns by their name or numeric position and (ii) <em>filtering observations</em> or rows according to the values of one or more variables. While R provides many tools and methods for subsetting data in these ways, we will focus on the <code>subset()</code> function, which provides a friendly interface to handling tabular data or data.frames. We will also cover the sparser bracket <code>[</code> and dollar <code>$</code> operators, which provide greater flexibility, albeit with a much more formidable syntax.</p>
<p>We’ll be working again with our familiar penguins data.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="subsetting-data.html#cb112-1"></a>penguins &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;penguins.csv&quot;</span>)</span>
<span id="cb112-2"><a href="subsetting-data.html#cb112-2"></a></span>
<span id="cb112-3"><a href="subsetting-data.html#cb112-3"></a><span class="kw">str</span>(penguins)</span>
<span id="cb112-4"><a href="subsetting-data.html#cb112-4"></a><span class="co">## &#39;data.frame&#39;:    344 obs. of  7 variables:</span></span>
<span id="cb112-5"><a href="subsetting-data.html#cb112-5"></a><span class="co">##  $ species          : chr  &quot;Adelie&quot; &quot;Adelie&quot; &quot;Adelie&quot; &quot;Adelie&quot; ...</span></span>
<span id="cb112-6"><a href="subsetting-data.html#cb112-6"></a><span class="co">##  $ island           : chr  &quot;Torgersen&quot; &quot;Torgersen&quot; &quot;Torgersen&quot; &quot;Torgersen&quot; ...</span></span>
<span id="cb112-7"><a href="subsetting-data.html#cb112-7"></a><span class="co">##  $ bill_length_mm   : num  39.1 39.5 40.3 NA 36.7 39.3 38.9 39.2 34.1 42 ...</span></span>
<span id="cb112-8"><a href="subsetting-data.html#cb112-8"></a><span class="co">##  $ flipper_length_mm: int  181 186 195 NA 193 190 181 195 193 190 ...</span></span>
<span id="cb112-9"><a href="subsetting-data.html#cb112-9"></a><span class="co">##  $ body_mass_g      : int  3750 3800 3250 NA 3450 3650 3625 4675 3475 4250 ...</span></span>
<span id="cb112-10"><a href="subsetting-data.html#cb112-10"></a><span class="co">##  $ sex              : chr  &quot;male&quot; &quot;female&quot; &quot;female&quot; NA ...</span></span>
<span id="cb112-11"><a href="subsetting-data.html#cb112-11"></a><span class="co">##  $ year             : int  2007 2007 2007 2007 2007 2007 2007 2007 2007 2007 ...</span></span></code></pre></div>
</div>
<div id="selecting-variables" class="section level2">
<h2><span class="header-section-number">10.2</span> Selecting variables</h2>
<p>Subsetting data by selecting variables is fairly straightforward with <code>subset()</code>. You simply pass the name of each column you want to the function’s <code>select</code> parameter. Here are some examples.</p>
<p><em>Select one variable</em></p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="subsetting-data.html#cb113-1"></a>penguins_subset &lt;-<span class="st"> </span><span class="kw">subset</span>(penguins, <span class="dt">select =</span> island)</span>
<span id="cb113-2"><a href="subsetting-data.html#cb113-2"></a></span>
<span id="cb113-3"><a href="subsetting-data.html#cb113-3"></a><span class="kw">head</span>(penguins_subset)</span>
<span id="cb113-4"><a href="subsetting-data.html#cb113-4"></a><span class="co">##      island</span></span>
<span id="cb113-5"><a href="subsetting-data.html#cb113-5"></a><span class="co">## 1 Torgersen</span></span>
<span id="cb113-6"><a href="subsetting-data.html#cb113-6"></a><span class="co">## 2 Torgersen</span></span>
<span id="cb113-7"><a href="subsetting-data.html#cb113-7"></a><span class="co">## 3 Torgersen</span></span>
<span id="cb113-8"><a href="subsetting-data.html#cb113-8"></a><span class="co">## 4 Torgersen</span></span>
<span id="cb113-9"><a href="subsetting-data.html#cb113-9"></a><span class="co">## 5 Torgersen</span></span>
<span id="cb113-10"><a href="subsetting-data.html#cb113-10"></a><span class="co">## 6 Torgersen</span></span></code></pre></div>
<p><em>Select multiple variables</em></p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="subsetting-data.html#cb114-1"></a>penguins_subset &lt;-<span class="st"> </span><span class="kw">subset</span>(penguins, <span class="dt">select =</span> <span class="kw">c</span>(species, island, body_mass_g))</span>
<span id="cb114-2"><a href="subsetting-data.html#cb114-2"></a></span>
<span id="cb114-3"><a href="subsetting-data.html#cb114-3"></a><span class="kw">head</span>(penguins_subset)</span>
<span id="cb114-4"><a href="subsetting-data.html#cb114-4"></a><span class="co">##   species    island body_mass_g</span></span>
<span id="cb114-5"><a href="subsetting-data.html#cb114-5"></a><span class="co">## 1  Adelie Torgersen        3750</span></span>
<span id="cb114-6"><a href="subsetting-data.html#cb114-6"></a><span class="co">## 2  Adelie Torgersen        3800</span></span>
<span id="cb114-7"><a href="subsetting-data.html#cb114-7"></a><span class="co">## 3  Adelie Torgersen        3250</span></span>
<span id="cb114-8"><a href="subsetting-data.html#cb114-8"></a><span class="co">## 4  Adelie Torgersen          NA</span></span>
<span id="cb114-9"><a href="subsetting-data.html#cb114-9"></a><span class="co">## 5  Adelie Torgersen        3450</span></span>
<span id="cb114-10"><a href="subsetting-data.html#cb114-10"></a><span class="co">## 6  Adelie Torgersen        3650</span></span></code></pre></div>
</div>
<div id="filtering-observations" class="section level2">
<h2><span class="header-section-number">10.3</span> Filtering observations</h2>
<p>Subsetting data by filtering observations is a little bit more involved, but intuitively, you are simply asking for those observations that satisfy a certain condition. Getting <code>subset()</code> to return those observations requires that you pass an expression containing a comparison operator to the function’s eponymous <code>subset</code> parameter. The expression is then evaluated by R for its truth or falsity, with observations that evaluate to <code>TRUE</code> being returned, observations that evaluate to <code>FALSE</code> being ignored. Let’s walk through an example, then try to break down what is happening in a little more detail. Suppose we want only those observations of penguins residing on Biscoe Island. Here is how we would go about collecting those observations from our penguins data.frame.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="subsetting-data.html#cb115-1"></a>biscoe_penguins &lt;-<span class="st"> </span><span class="kw">subset</span>(penguins, <span class="dt">subset =</span> (island <span class="op">==</span><span class="st"> &quot;Biscoe&quot;</span>))</span>
<span id="cb115-2"><a href="subsetting-data.html#cb115-2"></a></span>
<span id="cb115-3"><a href="subsetting-data.html#cb115-3"></a><span class="kw">head</span>(biscoe_penguins)</span>
<span id="cb115-4"><a href="subsetting-data.html#cb115-4"></a><span class="co">##    species island bill_length_mm flipper_length_mm body_mass_g    sex year</span></span>
<span id="cb115-5"><a href="subsetting-data.html#cb115-5"></a><span class="co">## 21  Adelie Biscoe           37.8               174        3400 female 2007</span></span>
<span id="cb115-6"><a href="subsetting-data.html#cb115-6"></a><span class="co">## 22  Adelie Biscoe           37.7               180        3600   male 2007</span></span>
<span id="cb115-7"><a href="subsetting-data.html#cb115-7"></a><span class="co">## 23  Adelie Biscoe           35.9               189        3800 female 2007</span></span>
<span id="cb115-8"><a href="subsetting-data.html#cb115-8"></a><span class="co">## 24  Adelie Biscoe           38.2               185        3950   male 2007</span></span>
<span id="cb115-9"><a href="subsetting-data.html#cb115-9"></a><span class="co">## 25  Adelie Biscoe           38.8               180        3800   male 2007</span></span>
<span id="cb115-10"><a href="subsetting-data.html#cb115-10"></a><span class="co">## 26  Adelie Biscoe           35.3               187        3800 female 2007</span></span></code></pre></div>
<p>Here we supplied this key information to the <code>subset()</code> function:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="subsetting-data.html#cb116-1"></a>subset =<span class="st"> </span>(island <span class="op">==</span><span class="st"> &quot;Biscoe&quot;</span>)</span></code></pre></div>
<p>with the additional parentheses provided only for readability, not because they are required. What does this expression mean exactly? In effect, it is directing <code>subset()</code> to scan through our data, specifically the <code>island</code> column, and select only those rows where the value is <em>Biscoe</em>. That’s <code>island == "Biscoe"</code>. The so-called <em>comparison operator</em> here is the double equal sign, <code>==</code>. This is importantly different than the single equal sign, <code>=</code>, which is used inside a function as part of a <code>key=value</code> or <code>argument=value</code> pair. R provides several helpful comparison operators:</p>
<ul>
<li><code>==</code> for <em>equals</em> in the sense of a perfect match,<br />
</li>
<li><code>!=</code> for <em>not equals</em>,<br />
</li>
<li><code>&gt;</code> for <em>greater than</em>,<br />
</li>
<li><code>&gt;=</code> for <em>greater than or equal to</em>,<br />
</li>
<li><code>&lt;</code> for <em>less than</em>, and<br />
</li>
<li><code>&lt;=</code> for <em>less than or equal to</em>.</li>
</ul>
<p>You can use the first two, <code>==</code> and <code>!=</code>, for comparisons with either character or numeric variables (integer or double), but the rest apply only to the latter. Let’s run through a few more examples:</p>
<p><em>Filter penguins with body mass greater than 3500 grams</em>.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="subsetting-data.html#cb117-1"></a>larger_penguins &lt;-<span class="st"> </span><span class="kw">subset</span>(penguins, <span class="dt">subset =</span> (body_mass_g <span class="op">&gt;</span><span class="st"> </span><span class="dv">3500</span>))</span>
<span id="cb117-2"><a href="subsetting-data.html#cb117-2"></a></span>
<span id="cb117-3"><a href="subsetting-data.html#cb117-3"></a><span class="kw">head</span>(larger_penguins)</span>
<span id="cb117-4"><a href="subsetting-data.html#cb117-4"></a><span class="co">##    species    island bill_length_mm flipper_length_mm body_mass_g    sex year</span></span>
<span id="cb117-5"><a href="subsetting-data.html#cb117-5"></a><span class="co">## 1   Adelie Torgersen           39.1               181        3750   male 2007</span></span>
<span id="cb117-6"><a href="subsetting-data.html#cb117-6"></a><span class="co">## 2   Adelie Torgersen           39.5               186        3800 female 2007</span></span>
<span id="cb117-7"><a href="subsetting-data.html#cb117-7"></a><span class="co">## 6   Adelie Torgersen           39.3               190        3650   male 2007</span></span>
<span id="cb117-8"><a href="subsetting-data.html#cb117-8"></a><span class="co">## 7   Adelie Torgersen           38.9               181        3625 female 2007</span></span>
<span id="cb117-9"><a href="subsetting-data.html#cb117-9"></a><span class="co">## 8   Adelie Torgersen           39.2               195        4675   male 2007</span></span>
<span id="cb117-10"><a href="subsetting-data.html#cb117-10"></a><span class="co">## 10  Adelie Torgersen           42.0               190        4250   &lt;NA&gt; 2007</span></span></code></pre></div>
<p><em>Filter penguins with beaks longer than 39 millimeters</em>.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="subsetting-data.html#cb118-1"></a>long_beaks &lt;-<span class="st"> </span><span class="kw">subset</span>(penguins, <span class="dt">subset =</span> (bill_length_mm <span class="op">&gt;</span><span class="st"> </span><span class="dv">39</span>))</span>
<span id="cb118-2"><a href="subsetting-data.html#cb118-2"></a></span>
<span id="cb118-3"><a href="subsetting-data.html#cb118-3"></a><span class="kw">head</span>(long_beaks)</span>
<span id="cb118-4"><a href="subsetting-data.html#cb118-4"></a><span class="co">##    species    island bill_length_mm flipper_length_mm body_mass_g    sex year</span></span>
<span id="cb118-5"><a href="subsetting-data.html#cb118-5"></a><span class="co">## 1   Adelie Torgersen           39.1               181        3750   male 2007</span></span>
<span id="cb118-6"><a href="subsetting-data.html#cb118-6"></a><span class="co">## 2   Adelie Torgersen           39.5               186        3800 female 2007</span></span>
<span id="cb118-7"><a href="subsetting-data.html#cb118-7"></a><span class="co">## 3   Adelie Torgersen           40.3               195        3250 female 2007</span></span>
<span id="cb118-8"><a href="subsetting-data.html#cb118-8"></a><span class="co">## 6   Adelie Torgersen           39.3               190        3650   male 2007</span></span>
<span id="cb118-9"><a href="subsetting-data.html#cb118-9"></a><span class="co">## 8   Adelie Torgersen           39.2               195        4675   male 2007</span></span>
<span id="cb118-10"><a href="subsetting-data.html#cb118-10"></a><span class="co">## 10  Adelie Torgersen           42.0               190        4250   &lt;NA&gt; 2007</span></span></code></pre></div>
<div id="multiple-conditions" class="section level3">
<h3><span class="header-section-number">10.3.1</span> Multiple conditions</h3>
<p>Often enough, we will want to combine a number of these simple conditions into one complex expression. In R, this is done with Boolean operators:</p>
<ul>
<li><code>&amp;</code> for <em>and</em>,<br />
</li>
<li><code>|</code> for <em>or</em>, and<br />
</li>
<li><code>!</code> for <em>not</em>.</li>
</ul>
<p>To demonstrate the underlying logic of these Boolean operators, consider these shapes and colors. You can think of each of A, B, and C as its own observation or row in a data.frame that includes two variables <code>color</code> and <code>shape</code>.</p>
<p><img src="images/booleans_example.png" width="40%" style="display: block; margin: auto;" /></p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Boolean
</th>
<th style="text-align:left;">
Subset
</th>
<th style="text-align:left;">
Result
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
x
</td>
<td style="text-align:left;">
<code>color == "yellow"</code>
</td>
<td style="text-align:left;">
A, B
</td>
</tr>
<tr>
<td style="text-align:left;">
y
</td>
<td style="text-align:left;">
<code>shape == "circle"</code>
</td>
<td style="text-align:left;">
B, C
</td>
</tr>
<tr>
<td style="text-align:left;">
x &amp; y
</td>
<td style="text-align:left;">
<code>color == "yellow" &amp; shape == "circle"</code>
</td>
<td style="text-align:left;">
B
</td>
</tr>
<tr>
<td style="text-align:left;">
x | y
</td>
<td style="text-align:left;">
<code>color == "yellow" | shape == "circle"</code>
</td>
<td style="text-align:left;">
A, B, C
</td>
</tr>
<tr>
<td style="text-align:left;">
x &amp; !y
</td>
<td style="text-align:left;">
<code>color == "yellow" &amp; shape != "circle"</code>
</td>
<td style="text-align:left;">
A
</td>
</tr>
<tr>
<td style="text-align:left;">
!x &amp; y
</td>
<td style="text-align:left;">
<code>color != "yellow" &amp; shape == "circle"</code>
</td>
<td style="text-align:left;">
C
</td>
</tr>
<tr>
<td style="text-align:left;">
!(x &amp; y)
</td>
<td style="text-align:left;">
<code>!(color == "yellow" &amp; shape == "circle")</code>
</td>
<td style="text-align:left;">
A, C
</td>
</tr>
<tr>
<td style="text-align:left;">
!(x | y)
</td>
<td style="text-align:left;">
<code>!(color == "yellow" | shape == "circle")</code>
</td>
<td style="text-align:left;">
NULL
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>And here is an example with our penguins data.frame, where we ask R to return those observations in which (a) penguins reside on Biscoe Island and (b) their bills are longer than 39 millimeters.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="subsetting-data.html#cb119-1"></a>biscoe_long_beaks &lt;-<span class="st"> </span><span class="kw">subset</span>(penguins, </span>
<span id="cb119-2"><a href="subsetting-data.html#cb119-2"></a>                            <span class="dt">subset =</span> (island <span class="op">==</span><span class="st"> &quot;Biscoe&quot;</span> <span class="op">&amp;</span><span class="st"> </span>bill_length_mm <span class="op">&gt;</span><span class="st"> </span><span class="dv">39</span>))</span>
<span id="cb119-3"><a href="subsetting-data.html#cb119-3"></a></span>
<span id="cb119-4"><a href="subsetting-data.html#cb119-4"></a><span class="kw">head</span>(biscoe_long_beaks)</span>
<span id="cb119-5"><a href="subsetting-data.html#cb119-5"></a><span class="co">##    species island bill_length_mm flipper_length_mm body_mass_g    sex year</span></span>
<span id="cb119-6"><a href="subsetting-data.html#cb119-6"></a><span class="co">## 27  Adelie Biscoe           40.6               183        3550   male 2007</span></span>
<span id="cb119-7"><a href="subsetting-data.html#cb119-7"></a><span class="co">## 28  Adelie Biscoe           40.5               187        3200 female 2007</span></span>
<span id="cb119-8"><a href="subsetting-data.html#cb119-8"></a><span class="co">## 30  Adelie Biscoe           40.5               180        3950   male 2007</span></span>
<span id="cb119-9"><a href="subsetting-data.html#cb119-9"></a><span class="co">## 51  Adelie Biscoe           39.6               186        3500 female 2008</span></span>
<span id="cb119-10"><a href="subsetting-data.html#cb119-10"></a><span class="co">## 52  Adelie Biscoe           40.1               188        4300   male 2008</span></span>
<span id="cb119-11"><a href="subsetting-data.html#cb119-11"></a><span class="co">## 54  Adelie Biscoe           42.0               200        4050   male 2008</span></span></code></pre></div>
</div>
</div>
<div id="filtering-and-selecting" class="section level2">
<h2><span class="header-section-number">10.4</span> Filtering and selecting</h2>
<p><code>subset()</code> also allows you to filter observations and select rows at the same time.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="subsetting-data.html#cb120-1"></a>biscoe_long_beaks &lt;-<span class="st"> </span><span class="kw">subset</span>(penguins, </span>
<span id="cb120-2"><a href="subsetting-data.html#cb120-2"></a>                            <span class="dt">subset =</span> (island <span class="op">==</span><span class="st"> &quot;Biscoe&quot;</span> <span class="op">&amp;</span><span class="st"> </span>bill_length_mm <span class="op">&gt;</span><span class="st"> </span><span class="dv">39</span>),</span>
<span id="cb120-3"><a href="subsetting-data.html#cb120-3"></a>                            <span class="dt">select =</span> <span class="kw">c</span>(species, island, bill_length_mm))</span>
<span id="cb120-4"><a href="subsetting-data.html#cb120-4"></a></span>
<span id="cb120-5"><a href="subsetting-data.html#cb120-5"></a><span class="kw">head</span>(biscoe_long_beaks)</span>
<span id="cb120-6"><a href="subsetting-data.html#cb120-6"></a><span class="co">##    species island bill_length_mm</span></span>
<span id="cb120-7"><a href="subsetting-data.html#cb120-7"></a><span class="co">## 27  Adelie Biscoe           40.6</span></span>
<span id="cb120-8"><a href="subsetting-data.html#cb120-8"></a><span class="co">## 28  Adelie Biscoe           40.5</span></span>
<span id="cb120-9"><a href="subsetting-data.html#cb120-9"></a><span class="co">## 30  Adelie Biscoe           40.5</span></span>
<span id="cb120-10"><a href="subsetting-data.html#cb120-10"></a><span class="co">## 51  Adelie Biscoe           39.6</span></span>
<span id="cb120-11"><a href="subsetting-data.html#cb120-11"></a><span class="co">## 52  Adelie Biscoe           40.1</span></span>
<span id="cb120-12"><a href="subsetting-data.html#cb120-12"></a><span class="co">## 54  Adelie Biscoe           42.0</span></span></code></pre></div>
<p>In this example, we filter observations to include only penguins that (a) reside on Biscoe Island and (b) have a bill length longer than 39 millimeters. We also select only the <code>species</code>, <code>island</code>, and <code>bill_length_mm</code> variables.</p>
</div>
<div id="formiddable-subsetting" class="section level2">
<h2><span class="header-section-number">10.5</span> Formiddable subsetting</h2>
<p>Selecting variables and filtering rows can also be done with the bracket <code>[</code> operator. This is a less friendly tool in many ways, but it is more flexible, meaning you can subset a data.frame in more ways than you can with the <code>subset()</code> function. What is more, understanding it, and especially the concept of an index vector, should help us better understand the use of <code>subset()</code> too. So, let’s first walk through an example of how to subset a data.frame. Then we’ll break down what we’re doing in more detail.</p>
<p>The basic syntax is this:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="subsetting-data.html#cb121-1"></a>dataframe[row, column]</span></code></pre></div>
<p>where <code>dataframe</code> is the name of your dataframe, <code>row</code> is an index vector of the filtered observations, and <code>column</code> is an index vector of the selected variables. As you see, the closed <code>[</code> operator flanks the row and column indexes, which are separated by a comma.</p>
<p>Here is an actual example with penguins:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="subsetting-data.html#cb122-1"></a><span class="co"># i for index</span></span>
<span id="cb122-2"><a href="subsetting-data.html#cb122-2"></a>row_i &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></span>
<span id="cb122-3"><a href="subsetting-data.html#cb122-3"></a>col_i &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span></span>
<span id="cb122-4"><a href="subsetting-data.html#cb122-4"></a></span>
<span id="cb122-5"><a href="subsetting-data.html#cb122-5"></a>penguins[row_i, col_i]</span>
<span id="cb122-6"><a href="subsetting-data.html#cb122-6"></a><span class="co">##   species    island bill_length_mm</span></span>
<span id="cb122-7"><a href="subsetting-data.html#cb122-7"></a><span class="co">## 1  Adelie Torgersen           39.1</span></span>
<span id="cb122-8"><a href="subsetting-data.html#cb122-8"></a><span class="co">## 2  Adelie Torgersen           39.5</span></span>
<span id="cb122-9"><a href="subsetting-data.html#cb122-9"></a><span class="co">## 3  Adelie Torgersen           40.3</span></span>
<span id="cb122-10"><a href="subsetting-data.html#cb122-10"></a><span class="co">## 4  Adelie Torgersen             NA</span></span>
<span id="cb122-11"><a href="subsetting-data.html#cb122-11"></a><span class="co">## 5  Adelie Torgersen           36.7</span></span></code></pre></div>
<p>This code filters the first five observations in the penguins data and selects the first three variables. The key to understanding this is to understand the concept of an index vector.</p>
</div>
<div id="index-vectors" class="section level2">
<h2><span class="header-section-number">10.6</span> Index vectors</h2>
<p>You should already be familiar with index vectors. That is actually what we were constructing when, for example, we supplied <code>subset = (bill_length_mm &gt; 39)</code> to <code>subset()</code>. These are known specifically as <em>logical</em> index vectors, for they include <code>TRUE</code> and <code>FALSE</code> values. The greater <em>flexibility</em> of <code>[</code> comes from the fact that you can supply it an index vector defined by any data type, not just logical vectors as <code>subset()</code> requires. That said, the three that are most useful (and the three that you will use most often) are:</p>
<ul>
<li><strong>Integer</strong>, which indexes by <em>position</em>,<br />
</li>
<li><strong>Character</strong>, which indexes by <em>name</em>, and<br />
</li>
<li><strong>Logical</strong>, which indexes by <em>condition</em>, as you learned above.</li>
</ul>
<p>Let’s walk through some examples of each.</p>
<div id="integer-index" class="section level3">
<h3><span class="header-section-number">10.6.1</span> Integer index</h3>
<p>With integer indexing, you select variables and filter rows by their literal numeric position. This is actually what we used in our example just above. The basic idea is to supply the <code>[</code> operator with a vector of integers for rows or observations and a vector of integers for columns or variables.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="subsetting-data.html#cb123-1"></a>row_i &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>)</span>
<span id="cb123-2"><a href="subsetting-data.html#cb123-2"></a>col_i &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span>
<span id="cb123-3"><a href="subsetting-data.html#cb123-3"></a></span>
<span id="cb123-4"><a href="subsetting-data.html#cb123-4"></a>penguins[row_i, col_i]</span>
<span id="cb123-5"><a href="subsetting-data.html#cb123-5"></a><span class="co">##    species bill_length_mm body_mass_g</span></span>
<span id="cb123-6"><a href="subsetting-data.html#cb123-6"></a><span class="co">## 2   Adelie           39.5        3800</span></span>
<span id="cb123-7"><a href="subsetting-data.html#cb123-7"></a><span class="co">## 4   Adelie             NA          NA</span></span>
<span id="cb123-8"><a href="subsetting-data.html#cb123-8"></a><span class="co">## 6   Adelie           39.3        3650</span></span>
<span id="cb123-9"><a href="subsetting-data.html#cb123-9"></a><span class="co">## 8   Adelie           39.2        4675</span></span>
<span id="cb123-10"><a href="subsetting-data.html#cb123-10"></a><span class="co">## 10  Adelie           42.0        4250</span></span></code></pre></div>
<p>For brevity, we can supply the indexing vectors directly.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="subsetting-data.html#cb124-1"></a>penguins[<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>), <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)]</span>
<span id="cb124-2"><a href="subsetting-data.html#cb124-2"></a><span class="co">##    species bill_length_mm body_mass_g</span></span>
<span id="cb124-3"><a href="subsetting-data.html#cb124-3"></a><span class="co">## 2   Adelie           39.5        3800</span></span>
<span id="cb124-4"><a href="subsetting-data.html#cb124-4"></a><span class="co">## 4   Adelie             NA          NA</span></span>
<span id="cb124-5"><a href="subsetting-data.html#cb124-5"></a><span class="co">## 6   Adelie           39.3        3650</span></span>
<span id="cb124-6"><a href="subsetting-data.html#cb124-6"></a><span class="co">## 8   Adelie           39.2        4675</span></span>
<span id="cb124-7"><a href="subsetting-data.html#cb124-7"></a><span class="co">## 10  Adelie           42.0        4250</span></span></code></pre></div>
<p>And, this is usually fine if the subsetting you are doing is quite simple. For more complex cases, you should stick to creating the indexing vectors first.</p>
<p>Because these are numbers, R allows us to perform arithmetic operations on them (like addition and subtraction) to produce new vectors. (Note that the parentheses are not necessary and are only added to increase readability.)</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="subsetting-data.html#cb125-1"></a>(row_i &lt;-<span class="st"> </span>(row_i <span class="op">-</span><span class="st"> </span><span class="dv">1</span>))</span>
<span id="cb125-2"><a href="subsetting-data.html#cb125-2"></a><span class="co">## [1] 1 3 5 7 9</span></span>
<span id="cb125-3"><a href="subsetting-data.html#cb125-3"></a>(col_i &lt;-<span class="st"> </span>(col_i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>))</span>
<span id="cb125-4"><a href="subsetting-data.html#cb125-4"></a><span class="co">## [1] 2 4 6</span></span>
<span id="cb125-5"><a href="subsetting-data.html#cb125-5"></a>penguins[row_i, col_i]</span>
<span id="cb125-6"><a href="subsetting-data.html#cb125-6"></a><span class="co">##      island flipper_length_mm    sex</span></span>
<span id="cb125-7"><a href="subsetting-data.html#cb125-7"></a><span class="co">## 1 Torgersen               181   male</span></span>
<span id="cb125-8"><a href="subsetting-data.html#cb125-8"></a><span class="co">## 3 Torgersen               195 female</span></span>
<span id="cb125-9"><a href="subsetting-data.html#cb125-9"></a><span class="co">## 5 Torgersen               193 female</span></span>
<span id="cb125-10"><a href="subsetting-data.html#cb125-10"></a><span class="co">## 7 Torgersen               181 female</span></span>
<span id="cb125-11"><a href="subsetting-data.html#cb125-11"></a><span class="co">## 9 Torgersen               193   &lt;NA&gt;</span></span></code></pre></div>
<p>Finally, if we want <em>everything but</em> some value or values, we simply negate the vectors with the dash, <code>-</code>.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="subsetting-data.html#cb126-1"></a><span class="co"># remove these specific columns</span></span>
<span id="cb126-2"><a href="subsetting-data.html#cb126-2"></a>penguins[row_i, <span class="op">-</span>col_i]</span>
<span id="cb126-3"><a href="subsetting-data.html#cb126-3"></a><span class="co">##   species bill_length_mm body_mass_g year</span></span>
<span id="cb126-4"><a href="subsetting-data.html#cb126-4"></a><span class="co">## 1  Adelie           39.1        3750 2007</span></span>
<span id="cb126-5"><a href="subsetting-data.html#cb126-5"></a><span class="co">## 3  Adelie           40.3        3250 2007</span></span>
<span id="cb126-6"><a href="subsetting-data.html#cb126-6"></a><span class="co">## 5  Adelie           36.7        3450 2007</span></span>
<span id="cb126-7"><a href="subsetting-data.html#cb126-7"></a><span class="co">## 7  Adelie           38.9        3625 2007</span></span>
<span id="cb126-8"><a href="subsetting-data.html#cb126-8"></a><span class="co">## 9  Adelie           34.1        3475 2007</span></span></code></pre></div>
</div>
<div id="character-index" class="section level3">
<h3><span class="header-section-number">10.6.2</span> Character index</h3>
<p>With character indexing, you reference objects by their given name. With data.frames, this is most useful for selecting variables.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="subsetting-data.html#cb127-1"></a>row_i &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></span>
<span id="cb127-2"><a href="subsetting-data.html#cb127-2"></a>col_i &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;species&quot;</span>, <span class="st">&quot;island&quot;</span>, <span class="st">&quot;body_mass_g&quot;</span>)</span>
<span id="cb127-3"><a href="subsetting-data.html#cb127-3"></a></span>
<span id="cb127-4"><a href="subsetting-data.html#cb127-4"></a>penguins[row_i, col_i]</span>
<span id="cb127-5"><a href="subsetting-data.html#cb127-5"></a><span class="co">##   species    island body_mass_g</span></span>
<span id="cb127-6"><a href="subsetting-data.html#cb127-6"></a><span class="co">## 1  Adelie Torgersen        3750</span></span>
<span id="cb127-7"><a href="subsetting-data.html#cb127-7"></a><span class="co">## 2  Adelie Torgersen        3800</span></span>
<span id="cb127-8"><a href="subsetting-data.html#cb127-8"></a><span class="co">## 3  Adelie Torgersen        3250</span></span>
<span id="cb127-9"><a href="subsetting-data.html#cb127-9"></a><span class="co">## 4  Adelie Torgersen          NA</span></span>
<span id="cb127-10"><a href="subsetting-data.html#cb127-10"></a><span class="co">## 5  Adelie Torgersen        3450</span></span></code></pre></div>
<p>If we want to extract a single variable as a vector from a data.frame, we can also use the <code>$</code> operator, which does not require you to quote the variable name. Because the <code>$</code> operator returns a single vector, we can also do simple indexing on it too.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="subsetting-data.html#cb128-1"></a>body_mass_g &lt;-<span class="st"> </span>penguins<span class="op">$</span>body_mass_g</span>
<span id="cb128-2"><a href="subsetting-data.html#cb128-2"></a></span>
<span id="cb128-3"><a href="subsetting-data.html#cb128-3"></a>body_mass_g[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</span>
<span id="cb128-4"><a href="subsetting-data.html#cb128-4"></a><span class="co">## [1] 3750 3800 3250   NA 3450</span></span></code></pre></div>
</div>
<div id="logical-index" class="section level3">
<h3><span class="header-section-number">10.6.3</span> Logical index</h3>
<p>To illustrate what our logical index vectors are doing in <code>subset()</code> and <code>[</code>, let’s look at the first five values of <code>body_mass_g</code> from the penguins data and suppose, perhaps, that we want to return only those penguins having a body mass greater than 3500 grams.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="subsetting-data.html#cb129-1"></a>body_mass_g &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">3750</span>, <span class="dv">3800</span>, <span class="dv">3250</span>, <span class="ot">NA</span>, <span class="dv">3450</span>, <span class="dv">3650</span>)</span>
<span id="cb129-2"><a href="subsetting-data.html#cb129-2"></a></span>
<span id="cb129-3"><a href="subsetting-data.html#cb129-3"></a>body_mass_g <span class="op">&gt;</span><span class="st"> </span><span class="dv">3500</span></span>
<span id="cb129-4"><a href="subsetting-data.html#cb129-4"></a><span class="co">## [1]  TRUE  TRUE FALSE    NA FALSE  TRUE</span></span></code></pre></div>
<p>As you see, R compares every value in <code>body_mass_g</code> to 3500. If the value is greater than 3500, it returns <code>TRUE</code>. If it is less than 3500, it returns <code>FALSE</code>. And <code>NA</code> returns <code>NA</code>. In <code>subset()</code>, these logical values are then used to decide which observations to filter. As mentioned above, observations or rows in which the comparison evaluates to <code>TRUE</code> are returned, those that evaluate to <code>FALSE</code> or <code>NA</code> are ignored.</p>
<p>Combining this idea with the use of the <code>$</code> operator, we can subset using <code>[</code> in this way:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="subsetting-data.html#cb130-1"></a><span class="co"># extract body mass variable as vector</span></span>
<span id="cb130-2"><a href="subsetting-data.html#cb130-2"></a>body_mass_g &lt;-<span class="st"> </span>penguins<span class="op">$</span>body_mass_g</span>
<span id="cb130-3"><a href="subsetting-data.html#cb130-3"></a></span>
<span id="cb130-4"><a href="subsetting-data.html#cb130-4"></a><span class="co"># construct logical index vector with it</span></span>
<span id="cb130-5"><a href="subsetting-data.html#cb130-5"></a>row_i &lt;-<span class="st"> </span>(body_mass_g <span class="op">&gt;</span><span class="st"> </span><span class="dv">3500</span>)</span>
<span id="cb130-6"><a href="subsetting-data.html#cb130-6"></a></span>
<span id="cb130-7"><a href="subsetting-data.html#cb130-7"></a><span class="co"># select variables</span></span>
<span id="cb130-8"><a href="subsetting-data.html#cb130-8"></a>col_i &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;species&quot;</span>, <span class="st">&quot;island&quot;</span>, <span class="st">&quot;body_mass_g&quot;</span>)</span>
<span id="cb130-9"><a href="subsetting-data.html#cb130-9"></a></span>
<span id="cb130-10"><a href="subsetting-data.html#cb130-10"></a><span class="co"># subset penguins</span></span>
<span id="cb130-11"><a href="subsetting-data.html#cb130-11"></a>penguins_subset &lt;-<span class="st"> </span>penguins[row_i, col_i]</span>
<span id="cb130-12"><a href="subsetting-data.html#cb130-12"></a></span>
<span id="cb130-13"><a href="subsetting-data.html#cb130-13"></a><span class="kw">head</span>(penguins_subset)</span>
<span id="cb130-14"><a href="subsetting-data.html#cb130-14"></a><span class="co">##    species    island body_mass_g</span></span>
<span id="cb130-15"><a href="subsetting-data.html#cb130-15"></a><span class="co">## 1   Adelie Torgersen        3750</span></span>
<span id="cb130-16"><a href="subsetting-data.html#cb130-16"></a><span class="co">## 2   Adelie Torgersen        3800</span></span>
<span id="cb130-17"><a href="subsetting-data.html#cb130-17"></a><span class="co">## NA    &lt;NA&gt;      &lt;NA&gt;          NA</span></span>
<span id="cb130-18"><a href="subsetting-data.html#cb130-18"></a><span class="co">## 6   Adelie Torgersen        3650</span></span>
<span id="cb130-19"><a href="subsetting-data.html#cb130-19"></a><span class="co">## 7   Adelie Torgersen        3625</span></span>
<span id="cb130-20"><a href="subsetting-data.html#cb130-20"></a><span class="co">## 8   Adelie Torgersen        4675</span></span></code></pre></div>
<p>Here, we subset the penguins data by penguins having a body mass greater than 3500 grams and select the variables <code>species</code>, <code>island</code>, and <code>body_mass_g</code>.</p>
<p>You can also use these in <code>subset()</code>. This is especially useful when your filter expression includes a very complex comparison.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="subsetting-data.html#cb131-1"></a><span class="co"># multiple conditions</span></span>
<span id="cb131-2"><a href="subsetting-data.html#cb131-2"></a>ind_<span class="dv">1</span> &lt;-<span class="st"> </span>(penguins<span class="op">$</span>body_mass_g <span class="op">&gt;</span><span class="st"> </span><span class="dv">3500</span>)</span>
<span id="cb131-3"><a href="subsetting-data.html#cb131-3"></a>ind_<span class="dv">2</span> &lt;-<span class="st"> </span>(penguins<span class="op">$</span>island <span class="op">==</span><span class="st"> &quot;Biscoe&quot;</span>)</span>
<span id="cb131-4"><a href="subsetting-data.html#cb131-4"></a>ind_<span class="dv">3</span> &lt;-<span class="st"> </span>(penguins<span class="op">$</span>bill_length_mm <span class="op">&gt;</span><span class="st"> </span><span class="dv">50</span>)</span>
<span id="cb131-5"><a href="subsetting-data.html#cb131-5"></a></span>
<span id="cb131-6"><a href="subsetting-data.html#cb131-6"></a><span class="co"># combined with Booleans into one row index</span></span>
<span id="cb131-7"><a href="subsetting-data.html#cb131-7"></a>row_i &lt;-<span class="st"> </span>(ind_<span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>ind_<span class="dv">2</span>) <span class="op">|</span><span class="st"> </span>ind_<span class="dv">3</span></span>
<span id="cb131-8"><a href="subsetting-data.html#cb131-8"></a></span>
<span id="cb131-9"><a href="subsetting-data.html#cb131-9"></a><span class="co"># select variables</span></span>
<span id="cb131-10"><a href="subsetting-data.html#cb131-10"></a>col_i &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;species&quot;</span>, <span class="st">&quot;island&quot;</span>, <span class="st">&quot;body_mass_g&quot;</span>)</span>
<span id="cb131-11"><a href="subsetting-data.html#cb131-11"></a></span>
<span id="cb131-12"><a href="subsetting-data.html#cb131-12"></a>penguins_subset &lt;-<span class="st"> </span><span class="kw">subset</span>(penguins,</span>
<span id="cb131-13"><a href="subsetting-data.html#cb131-13"></a>                          <span class="dt">subset =</span> row_i,</span>
<span id="cb131-14"><a href="subsetting-data.html#cb131-14"></a>                          <span class="dt">filter =</span> col_i)</span>
<span id="cb131-15"><a href="subsetting-data.html#cb131-15"></a></span>
<span id="cb131-16"><a href="subsetting-data.html#cb131-16"></a><span class="kw">head</span>(penguins_subset)</span>
<span id="cb131-17"><a href="subsetting-data.html#cb131-17"></a><span class="co">##    species island bill_length_mm flipper_length_mm body_mass_g    sex year</span></span>
<span id="cb131-18"><a href="subsetting-data.html#cb131-18"></a><span class="co">## 22  Adelie Biscoe           37.7               180        3600   male 2007</span></span>
<span id="cb131-19"><a href="subsetting-data.html#cb131-19"></a><span class="co">## 23  Adelie Biscoe           35.9               189        3800 female 2007</span></span>
<span id="cb131-20"><a href="subsetting-data.html#cb131-20"></a><span class="co">## 24  Adelie Biscoe           38.2               185        3950   male 2007</span></span>
<span id="cb131-21"><a href="subsetting-data.html#cb131-21"></a><span class="co">## 25  Adelie Biscoe           38.8               180        3800   male 2007</span></span>
<span id="cb131-22"><a href="subsetting-data.html#cb131-22"></a><span class="co">## 26  Adelie Biscoe           35.3               187        3800 female 2007</span></span>
<span id="cb131-23"><a href="subsetting-data.html#cb131-23"></a><span class="co">## 27  Adelie Biscoe           40.6               183        3550   male 2007</span></span></code></pre></div>
</div>
<div id="empty-index" class="section level3">
<h3><span class="header-section-number">10.6.4</span> Empty index</h3>
<p>For completeness, we should also mention that an empty vector will simply return unchanged whatever you are subsetting with it. This is not particularly useful when applied to simple atomic vectors, but it does save some typing when applied to data.frames and other vector types with dimensions. It saves typing by allowing you to leave unspecified the row index to return all rows and column index to return all columns.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="subsetting-data.html#cb132-1"></a>col_i &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;species&quot;</span>, <span class="st">&quot;island&quot;</span>, <span class="st">&quot;body_mass_g&quot;</span>)</span>
<span id="cb132-2"><a href="subsetting-data.html#cb132-2"></a></span>
<span id="cb132-3"><a href="subsetting-data.html#cb132-3"></a><span class="co"># empty space or empty vector for rows</span></span>
<span id="cb132-4"><a href="subsetting-data.html#cb132-4"></a>penguins_subset &lt;-<span class="st"> </span>penguins[ , col_i]</span>
<span id="cb132-5"><a href="subsetting-data.html#cb132-5"></a></span>
<span id="cb132-6"><a href="subsetting-data.html#cb132-6"></a><span class="co"># does it return all rows?</span></span>
<span id="cb132-7"><a href="subsetting-data.html#cb132-7"></a><span class="kw">nrow</span>(penguins_subset) <span class="op">==</span><span class="st"> </span><span class="kw">nrow</span>(penguins)</span>
<span id="cb132-8"><a href="subsetting-data.html#cb132-8"></a><span class="co">## [1] TRUE</span></span></code></pre></div>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="subsetting-data.html#cb133-1"></a>row_i &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></span>
<span id="cb133-2"><a href="subsetting-data.html#cb133-2"></a></span>
<span id="cb133-3"><a href="subsetting-data.html#cb133-3"></a><span class="co"># empty space or empty vector for columns</span></span>
<span id="cb133-4"><a href="subsetting-data.html#cb133-4"></a>penguins_subset &lt;-<span class="st"> </span>penguins[row_i, ]</span>
<span id="cb133-5"><a href="subsetting-data.html#cb133-5"></a></span>
<span id="cb133-6"><a href="subsetting-data.html#cb133-6"></a><span class="co"># does it return all columns?</span></span>
<span id="cb133-7"><a href="subsetting-data.html#cb133-7"></a><span class="kw">ncol</span>(penguins_subset) <span class="op">==</span><span class="st"> </span><span class="kw">ncol</span>(penguins)</span>
<span id="cb133-8"><a href="subsetting-data.html#cb133-8"></a><span class="co">## [1] TRUE</span></span></code></pre></div>
</div>
</div>
<div id="subset-output" class="section level2">
<h2><span class="header-section-number">10.7</span> Subset output</h2>
<p>While <code>subset()</code> always returns a data.frame, filtering rows and subsetting variables with <code>[</code> will return a different vector type depending on whether you are subsetting it with one or more columns. We can represent these outcomes as a 2x2 contingency matrix, with the value in each cell indicating the resulting vector If you select one variable, <code>[</code> will return a vector, and if you select multiple variables, it will return a data.frame.</p>
<p>If you recall that an atomic vector can have only one value, these rules should make sense to you. A column just is a vector with a single set of values, so indexing a single column should return a vector. However, a row cuts across vectors, potentially including multiple data types, so R has a choice to either coerce them all to the same data type and return a vector or keep the data types different and return a smaller data.frame. The latter is the safer alternative, so it makes sense.</p>
<p><em>Single column → vector</em></p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="subsetting-data.html#cb134-1"></a>row_i &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></span>
<span id="cb134-2"><a href="subsetting-data.html#cb134-2"></a>col_i &lt;-<span class="st"> </span><span class="dv">3</span></span>
<span id="cb134-3"><a href="subsetting-data.html#cb134-3"></a></span>
<span id="cb134-4"><a href="subsetting-data.html#cb134-4"></a>penguins[row_i, col_i]</span>
<span id="cb134-5"><a href="subsetting-data.html#cb134-5"></a><span class="co">## [1] 39.1 39.5 40.3   NA 36.7</span></span></code></pre></div>
<p><em>Multiple columns → data.frame</em></p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="subsetting-data.html#cb135-1"></a>row_i &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></span>
<span id="cb135-2"><a href="subsetting-data.html#cb135-2"></a>col_i &lt;-<span class="st"> </span><span class="dv">3</span><span class="op">:</span><span class="dv">5</span></span>
<span id="cb135-3"><a href="subsetting-data.html#cb135-3"></a></span>
<span id="cb135-4"><a href="subsetting-data.html#cb135-4"></a>penguins[row_i, col_i]</span>
<span id="cb135-5"><a href="subsetting-data.html#cb135-5"></a><span class="co">##   bill_length_mm flipper_length_mm body_mass_g</span></span>
<span id="cb135-6"><a href="subsetting-data.html#cb135-6"></a><span class="co">## 1           39.1               181        3750</span></span>
<span id="cb135-7"><a href="subsetting-data.html#cb135-7"></a><span class="co">## 2           39.5               186        3800</span></span>
<span id="cb135-8"><a href="subsetting-data.html#cb135-8"></a><span class="co">## 3           40.3               195        3250</span></span>
<span id="cb135-9"><a href="subsetting-data.html#cb135-9"></a><span class="co">## 4             NA                NA          NA</span></span>
<span id="cb135-10"><a href="subsetting-data.html#cb135-10"></a><span class="co">## 5           36.7               193        3450</span></span></code></pre></div>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-horst2020palmer">
<p>Horst, Allison Marie, Alison Presmanes Hill, and Kristen B Gorman. 2020. <em>Palmerpenguins: Palmer Archipelago (Antarctica) Penguin Data</em>. <a href="https://allisonhorst.github.io/palmerpenguins/">https://allisonhorst.github.io/palmerpenguins/</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="workspace-management.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="transforming-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["modtheworld.pdf", "modtheworld.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
