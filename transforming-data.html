<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 11 Transforming Data | Modeling the World with R</title>
  <meta name="description" content="This book provides a gentle yet comprehensive introduction to doing basic statistics in R." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 11 Transforming Data | Modeling the World with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book provides a gentle yet comprehensive introduction to doing basic statistics in R." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 11 Transforming Data | Modeling the World with R" />
  
  <meta name="twitter:description" content="This book provides a gentle yet comprehensive introduction to doing basic statistics in R." />
  

<meta name="author" content="Kenneth Blake Vernon" />


<meta name="date" content="2021-02-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="subsetting-data.html"/>
<link rel="next" href="empirical-modeling.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Modeling the World with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path="acknowledgments.html"><a href="acknowledgments.html"><i class="fa fa-check"></i>Acknowledgments</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#who-is-this-bookdown-for"><i class="fa fa-check"></i><b>1.1</b> Who is this bookdown for?</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#why-this-bookdown-project"><i class="fa fa-check"></i><b>1.2</b> Why this bookdown project?</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#pedagogy"><i class="fa fa-check"></i><b>1.3</b> Pedagogy</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#the-abelson-principle"><i class="fa fa-check"></i><b>1.4</b> The Abelson Principle</a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#book-layout"><i class="fa fa-check"></i><b>1.5</b> Book layout</a><ul>
<li class="chapter" data-level="1.5.1" data-path="intro.html"><a href="intro.html#chapter-overviews"><i class="fa fa-check"></i><b>1.5.1</b> Chapter overviews</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="intro.html"><a href="intro.html#r-code-formatting"><i class="fa fa-check"></i><b>1.6</b> R code formatting</a></li>
<li class="chapter" data-level="1.7" data-path="intro.html"><a href="intro.html#exercises-and-data"><i class="fa fa-check"></i><b>1.7</b> Exercises and data</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html"><i class="fa fa-check"></i><b>2</b> R and RStudio</a><ul>
<li class="chapter" data-level="2.1" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#what-is-r"><i class="fa fa-check"></i><b>2.1</b> What is R?</a><ul>
<li class="chapter" data-level="2.1.1" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#the-r-environment"><i class="fa fa-check"></i><b>2.1.1</b> The R Environment</a></li>
<li class="chapter" data-level="2.1.2" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#the-r-language"><i class="fa fa-check"></i><b>2.1.2</b> The R Language</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#why-r"><i class="fa fa-check"></i><b>2.2</b> Why R?</a><ul>
<li class="chapter" data-level="2.2.1" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#its-free"><i class="fa fa-check"></i><b>2.2.1</b> It’s free!</a></li>
<li class="chapter" data-level="2.2.2" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#its-statistics-made-easy"><i class="fa fa-check"></i><b>2.2.2</b> It’s statistics made easy</a></li>
<li class="chapter" data-level="2.2.3" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#its-pretty-figures"><i class="fa fa-check"></i><b>2.2.3</b> It’s pretty figures</a></li>
<li class="chapter" data-level="2.2.4" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#its-reproducible"><i class="fa fa-check"></i><b>2.2.4</b> It’s reproducible</a></li>
<li class="chapter" data-level="2.2.5" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#its-an-active-community"><i class="fa fa-check"></i><b>2.2.5</b> It’s an active community</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#rstudio"><i class="fa fa-check"></i><b>2.3</b> RStudio</a><ul>
<li class="chapter" data-level="2.3.1" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#pane-layout"><i class="fa fa-check"></i><b>2.3.1</b> Pane layout</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="example-workflow.html"><a href="example-workflow.html"><i class="fa fa-check"></i><b>3</b> An Example Workflow</a><ul>
<li class="chapter" data-level="3.1" data-path="example-workflow.html"><a href="example-workflow.html#in-fits-and-starts"><i class="fa fa-check"></i><b>3.1</b> In fits and starts</a></li>
<li class="chapter" data-level="3.2" data-path="example-workflow.html"><a href="example-workflow.html#the-whole-shebang"><i class="fa fa-check"></i><b>3.2</b> The whole shebang</a><ul>
<li class="chapter" data-level="3.2.1" data-path="example-workflow.html"><a href="example-workflow.html#load-data"><i class="fa fa-check"></i><b>3.2.1</b> Load data</a></li>
<li class="chapter" data-level="3.2.2" data-path="example-workflow.html"><a href="example-workflow.html#do-grunt-work"><i class="fa fa-check"></i><b>3.2.2</b> Do grunt work</a></li>
<li class="chapter" data-level="3.2.3" data-path="example-workflow.html"><a href="example-workflow.html#do-fun-stuff"><i class="fa fa-check"></i><b>3.2.3</b> Do fun stuff</a></li>
<li class="chapter" data-level="3.2.4" data-path="example-workflow.html"><a href="example-workflow.html#export-results"><i class="fa fa-check"></i><b>3.2.4</b> Export results</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="looking-for-help.html"><a href="looking-for-help.html"><i class="fa fa-check"></i><b>4</b> Looking for Help</a><ul>
<li class="chapter" data-level="4.1" data-path="looking-for-help.html"><a href="looking-for-help.html#the-google-search-paradox"><i class="fa fa-check"></i><b>4.1</b> The Google Search Paradox</a></li>
<li class="chapter" data-level="4.2" data-path="looking-for-help.html"><a href="looking-for-help.html#helpful-helpers"><i class="fa fa-check"></i><b>4.2</b> Helpful helpers</a><ul>
<li class="chapter" data-level="4.2.1" data-path="looking-for-help.html"><a href="looking-for-help.html#r"><i class="fa fa-check"></i><b>4.2.1</b> R</a></li>
<li class="chapter" data-level="4.2.2" data-path="looking-for-help.html"><a href="looking-for-help.html#rstudio-help"><i class="fa fa-check"></i><b>4.2.2</b> RStudio</a></li>
<li class="chapter" data-level="4.2.3" data-path="looking-for-help.html"><a href="looking-for-help.html#r-community"><i class="fa fa-check"></i><b>4.2.3</b> R Community</a></li>
<li class="chapter" data-level="4.2.4" data-path="looking-for-help.html"><a href="looking-for-help.html#other-resources"><i class="fa fa-check"></i><b>4.2.4</b> Other Resources</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="looking-for-help.html"><a href="looking-for-help.html#reproducible-examples"><i class="fa fa-check"></i><b>4.3</b> Reproducible examples</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="r-style-guide.html"><a href="r-style-guide.html"><i class="fa fa-check"></i><b>5</b> R Style Guide</a><ul>
<li class="chapter" data-level="5.1" data-path="r-style-guide.html"><a href="r-style-guide.html#abelson-again"><i class="fa fa-check"></i><b>5.1</b> Abelson again</a></li>
<li class="chapter" data-level="5.2" data-path="r-style-guide.html"><a href="r-style-guide.html#be-verbose"><i class="fa fa-check"></i><b>5.2</b> Be verbose!</a><ul>
<li class="chapter" data-level="5.2.1" data-path="r-style-guide.html"><a href="r-style-guide.html#object-names"><i class="fa fa-check"></i><b>5.2.1</b> Object names</a></li>
<li class="chapter" data-level="5.2.2" data-path="r-style-guide.html"><a href="r-style-guide.html#function-parameters"><i class="fa fa-check"></i><b>5.2.2</b> Function parameters</a></li>
<li class="chapter" data-level="5.2.3" data-path="r-style-guide.html"><a href="r-style-guide.html#code-commenting"><i class="fa fa-check"></i><b>5.2.3</b> Code commenting</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="r-style-guide.html"><a href="r-style-guide.html#dont-repeat-yourself-dry"><i class="fa fa-check"></i><b>5.3</b> Don’t Repeat Yourself (DRY)</a></li>
<li class="chapter" data-level="5.4" data-path="r-style-guide.html"><a href="r-style-guide.html#assignment-first"><i class="fa fa-check"></i><b>5.4</b> Assignment first</a></li>
<li class="chapter" data-level="5.5" data-path="r-style-guide.html"><a href="r-style-guide.html#the-cratylus-rule"><i class="fa fa-check"></i><b>5.5</b> The Cratylus Rule</a></li>
<li class="chapter" data-level="5.6" data-path="r-style-guide.html"><a href="r-style-guide.html#empty-nests"><i class="fa fa-check"></i><b>5.6</b> Empty nests!</a></li>
<li class="chapter" data-level="5.7" data-path="r-style-guide.html"><a href="r-style-guide.html#be-open"><i class="fa fa-check"></i><b>5.7</b> Be open</a><ul>
<li class="chapter" data-level="5.7.1" data-path="r-style-guide.html"><a href="r-style-guide.html#spacing"><i class="fa fa-check"></i><b>5.7.1</b> Spacing</a></li>
<li class="chapter" data-level="5.7.2" data-path="r-style-guide.html"><a href="r-style-guide.html#line-length"><i class="fa fa-check"></i><b>5.7.2</b> Line Length</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="r-style-guide.html"><a href="r-style-guide.html#be-organized"><i class="fa fa-check"></i><b>5.8</b> Be organized</a></li>
</ul></li>
<li class="part"><span><b>I Introduction to R</b></span></li>
<li class="chapter" data-level="6" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>6</b> R Basics</a><ul>
<li class="chapter" data-level="6.1" data-path="r-basics.html"><a href="r-basics.html#overview"><i class="fa fa-check"></i><b>6.1</b> Overview</a></li>
<li class="chapter" data-level="6.2" data-path="r-basics.html"><a href="r-basics.html#a-glorified-calculator"><i class="fa fa-check"></i><b>6.2</b> A Glorified Calculator?</a></li>
<li class="chapter" data-level="6.3" data-path="r-basics.html"><a href="r-basics.html#objects-and-functions"><i class="fa fa-check"></i><b>6.3</b> Objects and Functions</a><ul>
<li class="chapter" data-level="6.3.1" data-path="r-basics.html"><a href="r-basics.html#creating-objects-with-assignment"><i class="fa fa-check"></i><b>6.3.1</b> Creating objects with assignment</a></li>
<li class="chapter" data-level="6.3.2" data-path="r-basics.html"><a href="r-basics.html#doing-things-with-functions"><i class="fa fa-check"></i><b>6.3.2</b> Doing things with functions</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="r-basics.html"><a href="r-basics.html#vectorized-functions"><i class="fa fa-check"></i><b>6.4</b> Vectorized Functions</a></li>
<li class="chapter" data-level="6.5" data-path="r-basics.html"><a href="r-basics.html#console-and-scripts"><i class="fa fa-check"></i><b>6.5</b> Console and Scripts</a><ul>
<li class="chapter" data-level="6.5.1" data-path="r-basics.html"><a href="r-basics.html#r-console"><i class="fa fa-check"></i><b>6.5.1</b> R Console</a></li>
<li class="chapter" data-level="6.5.2" data-path="r-basics.html"><a href="r-basics.html#r-scripts"><i class="fa fa-check"></i><b>6.5.2</b> R Scripts</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="r-basics.html"><a href="r-basics.html#packages-in-the-r-library"><i class="fa fa-check"></i><b>6.6</b> Packages in the R Library</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="statistical-graphics.html"><a href="statistical-graphics.html"><i class="fa fa-check"></i><b>7</b> Statistical Graphics</a><ul>
<li class="chapter" data-level="7.1" data-path="statistical-graphics.html"><a href="statistical-graphics.html#overview-1"><i class="fa fa-check"></i><b>7.1</b> Overview</a></li>
<li class="chapter" data-level="7.2" data-path="statistical-graphics.html"><a href="statistical-graphics.html#plot-anatomy"><i class="fa fa-check"></i><b>7.2</b> Plot anatomy</a><ul>
<li class="chapter" data-level="7.2.1" data-path="statistical-graphics.html"><a href="statistical-graphics.html#region"><i class="fa fa-check"></i><b>7.2.1</b> Region</a></li>
<li class="chapter" data-level="7.2.2" data-path="statistical-graphics.html"><a href="statistical-graphics.html#sides"><i class="fa fa-check"></i><b>7.2.2</b> Sides</a></li>
<li class="chapter" data-level="7.2.3" data-path="statistical-graphics.html"><a href="statistical-graphics.html#axes"><i class="fa fa-check"></i><b>7.2.3</b> Axes</a></li>
<li class="chapter" data-level="7.2.4" data-path="statistical-graphics.html"><a href="statistical-graphics.html#titles"><i class="fa fa-check"></i><b>7.2.4</b> Titles</a></li>
<li class="chapter" data-level="7.2.5" data-path="statistical-graphics.html"><a href="statistical-graphics.html#margins"><i class="fa fa-check"></i><b>7.2.5</b> Margins</a></li>
<li class="chapter" data-level="7.2.6" data-path="statistical-graphics.html"><a href="statistical-graphics.html#legend"><i class="fa fa-check"></i><b>7.2.6</b> Legend</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="statistical-graphics.html"><a href="statistical-graphics.html#plot-function"><i class="fa fa-check"></i><b>7.3</b> The <code>plot()</code> Function</a><ul>
<li class="chapter" data-level="7.3.1" data-path="statistical-graphics.html"><a href="statistical-graphics.html#plot-type"><i class="fa fa-check"></i><b>7.3.1</b> Plot type</a></li>
<li class="chapter" data-level="7.3.2" data-path="statistical-graphics.html"><a href="statistical-graphics.html#plot-limits"><i class="fa fa-check"></i><b>7.3.2</b> Plot limits</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="statistical-graphics.html"><a href="statistical-graphics.html#layering"><i class="fa fa-check"></i><b>7.4</b> Layering</a></li>
<li class="chapter" data-level="7.5" data-path="statistical-graphics.html"><a href="statistical-graphics.html#annotation"><i class="fa fa-check"></i><b>7.5</b> Annotation</a></li>
<li class="chapter" data-level="7.6" data-path="statistical-graphics.html"><a href="statistical-graphics.html#graphical-parameters"><i class="fa fa-check"></i><b>7.6</b> Graphical parameters</a><ul>
<li class="chapter" data-level="7.6.1" data-path="statistical-graphics.html"><a href="statistical-graphics.html#region-1"><i class="fa fa-check"></i><b>7.6.1</b> Region</a></li>
<li class="chapter" data-level="7.6.2" data-path="statistical-graphics.html"><a href="statistical-graphics.html#geometry"><i class="fa fa-check"></i><b>7.6.2</b> Geometry</a></li>
<li class="chapter" data-level="7.6.3" data-path="statistical-graphics.html"><a href="statistical-graphics.html#text"><i class="fa fa-check"></i><b>7.6.3</b> Text</a></li>
<li class="chapter" data-level="7.6.4" data-path="statistical-graphics.html"><a href="statistical-graphics.html#color"><i class="fa fa-check"></i><b>7.6.4</b> Color</a></li>
<li class="chapter" data-level="7.6.5" data-path="statistical-graphics.html"><a href="statistical-graphics.html#size"><i class="fa fa-check"></i><b>7.6.5</b> Size</a></li>
<li class="chapter" data-level="7.6.6" data-path="statistical-graphics.html"><a href="statistical-graphics.html#margin"><i class="fa fa-check"></i><b>7.6.6</b> Margin</a></li>
<li class="chapter" data-level="7.6.7" data-path="statistical-graphics.html"><a href="statistical-graphics.html#layout"><i class="fa fa-check"></i><b>7.6.7</b> Layout</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="statistical-graphics.html"><a href="statistical-graphics.html#saving-figures"><i class="fa fa-check"></i><b>7.7</b> Saving figures</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="vector-types.html"><a href="vector-types.html"><i class="fa fa-check"></i><b>8</b> Vector Types</a><ul>
<li class="chapter" data-level="8.1" data-path="vector-types.html"><a href="vector-types.html#overview-2"><i class="fa fa-check"></i><b>8.1</b> Overview</a></li>
<li class="chapter" data-level="8.2" data-path="vector-types.html"><a href="vector-types.html#data-types"><i class="fa fa-check"></i><b>8.2</b> Data types</a><ul>
<li class="chapter" data-level="8.2.1" data-path="vector-types.html"><a href="vector-types.html#integer"><i class="fa fa-check"></i><b>8.2.1</b> Integer</a></li>
<li class="chapter" data-level="8.2.2" data-path="vector-types.html"><a href="vector-types.html#double"><i class="fa fa-check"></i><b>8.2.2</b> Double</a></li>
<li class="chapter" data-level="8.2.3" data-path="vector-types.html"><a href="vector-types.html#character"><i class="fa fa-check"></i><b>8.2.3</b> Character</a></li>
<li class="chapter" data-level="8.2.4" data-path="vector-types.html"><a href="vector-types.html#logical"><i class="fa fa-check"></i><b>8.2.4</b> Logical</a></li>
<li class="chapter" data-level="8.2.5" data-path="vector-types.html"><a href="vector-types.html#factors"><i class="fa fa-check"></i><b>8.2.5</b> Factors</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="vector-types.html"><a href="vector-types.html#vector-types-1"><i class="fa fa-check"></i><b>8.3</b> Vector types</a><ul>
<li class="chapter" data-level="8.3.1" data-path="vector-types.html"><a href="vector-types.html#scalar"><i class="fa fa-check"></i><b>8.3.1</b> Scalar</a></li>
<li class="chapter" data-level="8.3.2" data-path="vector-types.html"><a href="vector-types.html#vector"><i class="fa fa-check"></i><b>8.3.2</b> Vector</a></li>
<li class="chapter" data-level="8.3.3" data-path="vector-types.html"><a href="vector-types.html#matrix"><i class="fa fa-check"></i><b>8.3.3</b> Matrix</a></li>
<li class="chapter" data-level="8.3.4" data-path="vector-types.html"><a href="vector-types.html#list"><i class="fa fa-check"></i><b>8.3.4</b> List</a></li>
<li class="chapter" data-level="8.3.5" data-path="vector-types.html"><a href="vector-types.html#data.frame"><i class="fa fa-check"></i><b>8.3.5</b> Data.frame</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="vector-types.html"><a href="vector-types.html#vector-display"><i class="fa fa-check"></i><b>8.4</b> Vector display</a></li>
<li class="chapter" data-level="8.5" data-path="vector-types.html"><a href="vector-types.html#coercion"><i class="fa fa-check"></i><b>8.5</b> Coercion</a><ul>
<li class="chapter" data-level="8.5.1" data-path="vector-types.html"><a href="vector-types.html#data-type-coercion"><i class="fa fa-check"></i><b>8.5.1</b> Data type coercion</a></li>
<li class="chapter" data-level="8.5.2" data-path="vector-types.html"><a href="vector-types.html#vector-type-coercion"><i class="fa fa-check"></i><b>8.5.2</b> Vector type coercion</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="workspace-management.html"><a href="workspace-management.html"><i class="fa fa-check"></i><b>9</b> Workspace Management</a><ul>
<li class="chapter" data-level="9.1" data-path="workspace-management.html"><a href="workspace-management.html#overview-3"><i class="fa fa-check"></i><b>9.1</b> Overview</a></li>
<li class="chapter" data-level="9.2" data-path="workspace-management.html"><a href="workspace-management.html#the-workspace"><i class="fa fa-check"></i><b>9.2</b> The workspace</a><ul>
<li class="chapter" data-level="9.2.1" data-path="workspace-management.html"><a href="workspace-management.html#workspace-management-1"><i class="fa fa-check"></i><b>9.2.1</b> Workspace management</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="workspace-management.html"><a href="workspace-management.html#the-working-directory"><i class="fa fa-check"></i><b>9.3</b> The working directory</a><ul>
<li class="chapter" data-level="9.3.1" data-path="workspace-management.html"><a href="workspace-management.html#file-paths"><i class="fa fa-check"></i><b>9.3.1</b> File paths</a></li>
<li class="chapter" data-level="9.3.2" data-path="workspace-management.html"><a href="workspace-management.html#setting-the-working-directory"><i class="fa fa-check"></i><b>9.3.2</b> Setting the working directory</a></li>
<li class="chapter" data-level="9.3.3" data-path="workspace-management.html"><a href="workspace-management.html#reproducible-projects"><i class="fa fa-check"></i><b>9.3.3</b> Reproducible projects</a></li>
<li class="chapter" data-level="9.3.4" data-path="workspace-management.html"><a href="workspace-management.html#directory-management"><i class="fa fa-check"></i><b>9.3.4</b> Directory management</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="workspace-management.html"><a href="workspace-management.html#data-import-and-export"><i class="fa fa-check"></i><b>9.4</b> Data Import and Export</a><ul>
<li class="chapter" data-level="9.4.1" data-path="workspace-management.html"><a href="workspace-management.html#read-and-write-tables"><i class="fa fa-check"></i><b>9.4.1</b> Read and write tables</a></li>
<li class="chapter" data-level="9.4.2" data-path="workspace-management.html"><a href="workspace-management.html#read-and-save-objects"><i class="fa fa-check"></i><b>9.4.2</b> Read and save objects</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="subsetting-data.html"><a href="subsetting-data.html"><i class="fa fa-check"></i><b>10</b> Subsetting Data</a><ul>
<li class="chapter" data-level="10.1" data-path="subsetting-data.html"><a href="subsetting-data.html#overview-4"><i class="fa fa-check"></i><b>10.1</b> Overview</a></li>
<li class="chapter" data-level="10.2" data-path="subsetting-data.html"><a href="subsetting-data.html#selecting-variables"><i class="fa fa-check"></i><b>10.2</b> Selecting variables</a></li>
<li class="chapter" data-level="10.3" data-path="subsetting-data.html"><a href="subsetting-data.html#filtering-observations"><i class="fa fa-check"></i><b>10.3</b> Filtering observations</a><ul>
<li class="chapter" data-level="10.3.1" data-path="subsetting-data.html"><a href="subsetting-data.html#multiple-conditions"><i class="fa fa-check"></i><b>10.3.1</b> Multiple conditions</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="subsetting-data.html"><a href="subsetting-data.html#filtering-and-selecting"><i class="fa fa-check"></i><b>10.4</b> Filtering and selecting</a></li>
<li class="chapter" data-level="10.5" data-path="subsetting-data.html"><a href="subsetting-data.html#formiddable-subsetting"><i class="fa fa-check"></i><b>10.5</b> Formiddable subsetting</a><ul>
<li class="chapter" data-level="10.5.1" data-path="subsetting-data.html"><a href="subsetting-data.html#integer-index"><i class="fa fa-check"></i><b>10.5.1</b> Integer index</a></li>
<li class="chapter" data-level="10.5.2" data-path="subsetting-data.html"><a href="subsetting-data.html#character-index"><i class="fa fa-check"></i><b>10.5.2</b> Character index</a></li>
<li class="chapter" data-level="10.5.3" data-path="subsetting-data.html"><a href="subsetting-data.html#logical-index"><i class="fa fa-check"></i><b>10.5.3</b> Logical index</a></li>
<li class="chapter" data-level="10.5.4" data-path="subsetting-data.html"><a href="subsetting-data.html#empty-index"><i class="fa fa-check"></i><b>10.5.4</b> Empty index</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="subsetting-data.html"><a href="subsetting-data.html#result"><i class="fa fa-check"></i><b>10.6</b> Result</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="transforming-data.html"><a href="transforming-data.html"><i class="fa fa-check"></i><b>11</b> Transforming Data</a><ul>
<li class="chapter" data-level="11.1" data-path="transforming-data.html"><a href="transforming-data.html#overview-5"><i class="fa fa-check"></i><b>11.1</b> Overview</a></li>
<li class="chapter" data-level="11.2" data-path="transforming-data.html"><a href="transforming-data.html#order-table"><i class="fa fa-check"></i><b>11.2</b> Order table</a></li>
<li class="chapter" data-level="11.3" data-path="transforming-data.html"><a href="transforming-data.html#combine-tables"><i class="fa fa-check"></i><b>11.3</b> Combine tables</a></li>
<li class="chapter" data-level="11.4" data-path="transforming-data.html"><a href="transforming-data.html#change-variable"><i class="fa fa-check"></i><b>11.4</b> Change variable</a></li>
<li class="chapter" data-level="11.5" data-path="transforming-data.html"><a href="transforming-data.html#add-variable"><i class="fa fa-check"></i><b>11.5</b> Add variable</a></li>
<li class="chapter" data-level="11.6" data-path="transforming-data.html"><a href="transforming-data.html#aggregate-factors"><i class="fa fa-check"></i><b>11.6</b> Aggregate factors</a></li>
</ul></li>
<li class="part"><span><b>II Introduction to Statistics</b></span></li>
<li class="chapter" data-level="12" data-path="empirical-modeling.html"><a href="empirical-modeling.html"><i class="fa fa-check"></i><b>12</b> Empirical Modeling</a><ul>
<li class="chapter" data-level="12.1" data-path="empirical-modeling.html"><a href="empirical-modeling.html#overview-6"><i class="fa fa-check"></i><b>12.1</b> Overview</a></li>
<li class="chapter" data-level="12.2" data-path="empirical-modeling.html"><a href="empirical-modeling.html#model-components"><i class="fa fa-check"></i><b>12.2</b> Model components</a><ul>
<li class="chapter" data-level="12.2.1" data-path="empirical-modeling.html"><a href="empirical-modeling.html#outcome"><i class="fa fa-check"></i><b>12.2.1</b> Outcome</a></li>
<li class="chapter" data-level="12.2.2" data-path="empirical-modeling.html"><a href="empirical-modeling.html#expectation"><i class="fa fa-check"></i><b>12.2.2</b> Expectation</a></li>
<li class="chapter" data-level="12.2.3" data-path="empirical-modeling.html"><a href="empirical-modeling.html#error"><i class="fa fa-check"></i><b>12.2.3</b> Error</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="empirical-modeling.html"><a href="empirical-modeling.html#model-process"><i class="fa fa-check"></i><b>12.3</b> Model process</a><ul>
<li class="chapter" data-level="12.3.1" data-path="empirical-modeling.html"><a href="empirical-modeling.html#sampling"><i class="fa fa-check"></i><b>12.3.1</b> Sampling</a></li>
<li class="chapter" data-level="12.3.2" data-path="empirical-modeling.html"><a href="empirical-modeling.html#describing"><i class="fa fa-check"></i><b>12.3.2</b> Describing</a></li>
<li class="chapter" data-level="12.3.3" data-path="empirical-modeling.html"><a href="empirical-modeling.html#inferring"><i class="fa fa-check"></i><b>12.3.3</b> Inferring</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="univariate-description.html"><a href="univariate-description.html"><i class="fa fa-check"></i><b>13</b> Univariate Description</a><ul>
<li class="chapter" data-level="13.1" data-path="univariate-description.html"><a href="univariate-description.html#overview-7"><i class="fa fa-check"></i><b>13.1</b> Overview</a></li>
<li class="chapter" data-level="13.2" data-path="univariate-description.html"><a href="univariate-description.html#central-tendency"><i class="fa fa-check"></i><b>13.2</b> Central tendency</a><ul>
<li class="chapter" data-level="13.2.1" data-path="univariate-description.html"><a href="univariate-description.html#mean"><i class="fa fa-check"></i><b>13.2.1</b> Mean</a></li>
<li class="chapter" data-level="13.2.2" data-path="univariate-description.html"><a href="univariate-description.html#median"><i class="fa fa-check"></i><b>13.2.2</b> Median</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="univariate-description.html"><a href="univariate-description.html#variability"><i class="fa fa-check"></i><b>13.3</b> Variability</a><ul>
<li class="chapter" data-level="13.3.1" data-path="univariate-description.html"><a href="univariate-description.html#variance"><i class="fa fa-check"></i><b>13.3.1</b> Variance</a></li>
<li class="chapter" data-level="13.3.2" data-path="univariate-description.html"><a href="univariate-description.html#standard-deviation"><i class="fa fa-check"></i><b>13.3.2</b> Standard deviation</a></li>
<li class="chapter" data-level="13.3.3" data-path="univariate-description.html"><a href="univariate-description.html#quantiles"><i class="fa fa-check"></i><b>13.3.3</b> Quantiles</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="univariate-description.html"><a href="univariate-description.html#categorical-data"><i class="fa fa-check"></i><b>13.4</b> Categorical Data</a><ul>
<li class="chapter" data-level="13.4.1" data-path="univariate-description.html"><a href="univariate-description.html#mode"><i class="fa fa-check"></i><b>13.4.1</b> Mode</a></li>
<li class="chapter" data-level="13.4.2" data-path="univariate-description.html"><a href="univariate-description.html#counts-and-proportions"><i class="fa fa-check"></i><b>13.4.2</b> Counts and proportions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="probability-distributions.html"><a href="probability-distributions.html"><i class="fa fa-check"></i><b>14</b> Probability Distributions</a></li>
<li class="chapter" data-level="15" data-path="inference-tests.html"><a href="inference-tests.html"><i class="fa fa-check"></i><b>15</b> Inference Tests</a></li>
<li class="chapter" data-level="16" data-path="multivariate-description.html"><a href="multivariate-description.html"><i class="fa fa-check"></i><b>16</b> Multivariate Description</a></li>
<li class="chapter" data-level="17" data-path="ols.html"><a href="ols.html"><i class="fa fa-check"></i><b>17</b> Linear Models</a></li>
<li class="chapter" data-level="18" data-path="model-diagnostics.html"><a href="model-diagnostics.html"><i class="fa fa-check"></i><b>18</b> Model Diagnostics</a></li>
<li class="chapter" data-level="19" data-path="glm.html"><a href="glm.html"><i class="fa fa-check"></i><b>19</b> Generalized Linear Models</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Modeling the World with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="transforming-data" class="section level1">
<h1><span class="header-section-number">Chapter 11</span> Transforming Data</h1>
<!-- include libraries -->
<!-- kableExtra bootstrap css 
https://haozhu233.github.io/kableExtra/bookdown/use-bootstrap-tables-in-gitbooks-epub.html
-->
<!-- knit_hook: collapse and strip white 
this is a Blake hack -->
<!-- knit_hook: collapse and print error red
super hacky, see here: https://stackoverflow.com/a/54985678/7705429
we'll need to be careful to not string four # together anywhere
--->
<script>
$(document).ready(function() {
  window.setTimeout(function() {
    $(".co:contains('####')").css("color", "red");
    var tmp = $(".co:contains('####')").text();
    $(".co:contains('####')").text(tmp.replace("####", "##"));
  }, 15);
});
</script>
<!-- chunk options -->
<!-- miscellaneous -->
<!-- 
make error messages closer to base R 
https://github.com/hadley/adv-r/blob/master/common.R
looks like it doesn't work because R no longer
let's users override s3 methods, so I changed the s3 to "simpleError"
-->
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-2"></span>
<a href="https://github.com/allisonhorst/stats-illustrations" target="_blank"><img src="https://raw.githubusercontent.com/allisonhorst/stats-illustrations/master/rstats-artwork/data_cowboy.png" alt="Artwork by Allison Horst contributed to Hadley Wickham's talk &quot;The Joy of Functional Programming (for Data Science).&quot;" width="70%" /></a>
<p class="caption">
Figure 4.1: Artwork by Allison Horst contributed to Hadley Wickham’s talk “The Joy of Functional Programming (for Data Science).”
</p>
</div>
<div id="overview-5" class="section level2">
<h2><span class="header-section-number">11.1</span> Overview</h2>
<table class="table-intro table table-hover table-striped" style="margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:left;border: 0 solid transparent; padding-right: 0px; vertical-align: top;">
<strong>Goal</strong>
</td>
<td style="text-align:left;border: 0 solid transparent; padding-left: 9px; text-align: justify; text-justify: inter-word;">
To learn how to transform tabular data to make it suitable for statistical analysis.
</td>
</tr>
<tr>
<td style="text-align:left;border: 0 solid transparent; padding-right: 0px; vertical-align: top;">
<strong>tl;dr</strong>
</td>
<td style="text-align:left;border: 0 solid transparent; padding-left: 9px; text-align: justify; text-justify: inter-word;">
Transforming data is challenging in any context, but at least it’s reproducible in R.
</td>
</tr>
<tr>
<td style="text-align:left;border: 0 solid transparent; padding-right: 0px; vertical-align: top;">
<strong>Outcomes</strong>
</td>
<td style="text-align:left;border: 0 solid transparent; padding-left: 9px; text-align: justify; text-justify: inter-word;">
Here, you will learn about<br>
<ol>
<li>
arranging data.frames by ordering along one or more variables,
</li>
<li>
combining data.frames by binding rows and columns,
</li>
<li>
transforming data.frames by adding variables or changing values, and
</li>
<li>
summarizing data.frames by aggregating factor variables.
</li>
</ol>
</td>
</tr>
<tr>
<td style="text-align:left;border: 0 solid transparent; padding-right: 0px; vertical-align: top;">
<strong>Datasets</strong>
</td>
<td style="text-align:left;border: 0 solid transparent; padding-left: 9px; text-align: justify; text-justify: inter-word;">
<a href="https://allisonhorst.github.io/palmerpenguins/">Palmer Penguins</a> <span class="citation">(Horst, Hill, and Gorman <a href="#ref-horst2020palmer" role="doc-biblioref">2020</a>)</span>
</td>
</tr>
<tr>
<td style="text-align:left;border: 0 solid transparent; padding-right: 0px; vertical-align: top;">
<strong>Requirements</strong>
</td>
<td style="text-align:left;border: 0 solid transparent; padding-left: 9px; text-align: justify; text-justify: inter-word;">
NONE
</td>
</tr>
<tr>
<td style="text-align:left;border: 0 solid transparent; padding-right: 0px; vertical-align: top;">
<strong>Further Reading</strong>
</td>
<td style="text-align:left;border: 0 solid transparent; padding-left: 9px; text-align: justify; text-justify: inter-word;">
NONE
</td>
</tr>
</tbody>
</table>
<p>Often times, getting your data ready for analysis will require you to transform it in one way or another, though not, of course, in ways that would imply you are cooking the books! To explore the various tools R provides for doing this, we’ll return again to our penguins data.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="transforming-data.html#cb136-1"></a>penguins &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;penguins.csv&quot;</span>)</span>
<span id="cb136-2"><a href="transforming-data.html#cb136-2"></a></span>
<span id="cb136-3"><a href="transforming-data.html#cb136-3"></a><span class="kw">str</span>(penguins)</span>
<span id="cb136-4"><a href="transforming-data.html#cb136-4"></a><span class="co">## &#39;data.frame&#39;:    344 obs. of  7 variables:</span></span>
<span id="cb136-5"><a href="transforming-data.html#cb136-5"></a><span class="co">##  $ species          : chr  &quot;Adelie&quot; &quot;Adelie&quot; &quot;Adelie&quot; &quot;Adelie&quot; ...</span></span>
<span id="cb136-6"><a href="transforming-data.html#cb136-6"></a><span class="co">##  $ island           : chr  &quot;Torgersen&quot; &quot;Torgersen&quot; &quot;Torgersen&quot; &quot;Torgersen&quot; ...</span></span>
<span id="cb136-7"><a href="transforming-data.html#cb136-7"></a><span class="co">##  $ bill_length_mm   : num  39.1 39.5 40.3 NA 36.7 39.3 38.9 39.2 34.1 42 ...</span></span>
<span id="cb136-8"><a href="transforming-data.html#cb136-8"></a><span class="co">##  $ flipper_length_mm: int  181 186 195 NA 193 190 181 195 193 190 ...</span></span>
<span id="cb136-9"><a href="transforming-data.html#cb136-9"></a><span class="co">##  $ body_mass_g      : int  3750 3800 3250 NA 3450 3650 3625 4675 3475 4250 ...</span></span>
<span id="cb136-10"><a href="transforming-data.html#cb136-10"></a><span class="co">##  $ sex              : chr  &quot;male&quot; &quot;female&quot; &quot;female&quot; NA ...</span></span>
<span id="cb136-11"><a href="transforming-data.html#cb136-11"></a><span class="co">##  $ year             : int  2007 2007 2007 2007 2007 2007 2007 2007 2007 2007 ...</span></span></code></pre></div>
</div>
<div id="order-table" class="section level2">
<h2><span class="header-section-number">11.2</span> Order table</h2>
<p>Suppose we want to re-arrange the rows of our penguins data by sorting in terms of body mass. Ideally, base R would provide us a function that takes a data.frame as input, along with a specification of which variable or variables should be used to re-order rows, and return the re-ordered data.frame as output. Unfortunately, that does not exist, not in base R anyway. So, ordering a data.frame requires some finagling. Specifically, you need to create an <em>index vector</em> of the re-ordered rows and apply that to the data.frame. In this case, the sorting vector needs to have a length equal to the number of rows in the table. This is because we are not subsetting or filtering the rows, but simply returning them in a different order. To create such a vector, we use the <code>order()</code> function, passing it the variable we want to order the table with. It is probably easiest to see how <code>order()</code> works by first considering a vector of un-ordered letters.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="transforming-data.html#cb137-1"></a>unordered_letters &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;b&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;c&quot;</span>)</span>
<span id="cb137-2"><a href="transforming-data.html#cb137-2"></a></span>
<span id="cb137-3"><a href="transforming-data.html#cb137-3"></a>(i &lt;-<span class="st"> </span><span class="kw">order</span>(unordered_letters))</span>
<span id="cb137-4"><a href="transforming-data.html#cb137-4"></a><span class="co">## [1] 4 1 5 2 3</span></span></code></pre></div>
<p>The vector <code>order()</code> returns here is a vector of numeric positions. These numeric positions line up with the letters in the <code>unordered_letters</code> vector like so:</p>
<ul>
<li><code>4</code> refers to <code>"a"</code></li>
<li><code>1</code> refers to <code>"b"</code>,</li>
<li><code>5</code> refers to <code>"c"</code>,</li>
<li><code>2</code> refers to <code>"d"</code>, and</li>
<li><code>3</code> refers to <code>"e"</code>.</li>
</ul>
<p>We can, thus, use the result of <code>order()</code> to put the letters of <code>unordered_letters</code> into their proper alphabetic order.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="transforming-data.html#cb138-1"></a>unordered_letters[i]</span>
<span id="cb138-2"><a href="transforming-data.html#cb138-2"></a><span class="co">## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot;</span></span></code></pre></div>
<p>When applied to a variable in a table, the numeric positions returned are also the row numbers. Hence, we can use the result of <code>order()</code> to re-arrange rows in a table by the specified variable.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="transforming-data.html#cb139-1"></a><span class="co"># create index vector</span></span>
<span id="cb139-2"><a href="transforming-data.html#cb139-2"></a>row_order &lt;-<span class="st"> </span><span class="kw">order</span>(penguins<span class="op">$</span>body_mass_g)</span>
<span id="cb139-3"><a href="transforming-data.html#cb139-3"></a></span>
<span id="cb139-4"><a href="transforming-data.html#cb139-4"></a>row_order[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</span>
<span id="cb139-5"><a href="transforming-data.html#cb139-5"></a><span class="co">## [1] 315  59  65  55  99</span></span>
<span id="cb139-6"><a href="transforming-data.html#cb139-6"></a>order_penguins &lt;-<span class="st"> </span>penguins[row_order, ]</span>
<span id="cb139-7"><a href="transforming-data.html#cb139-7"></a></span>
<span id="cb139-8"><a href="transforming-data.html#cb139-8"></a><span class="kw">head</span>(order_penguins)</span>
<span id="cb139-9"><a href="transforming-data.html#cb139-9"></a><span class="co">##       species    island bill_length_mm flipper_length_mm body_mass_g    sex</span></span>
<span id="cb139-10"><a href="transforming-data.html#cb139-10"></a><span class="co">## 315 Chinstrap     Dream           46.9               192        2700 female</span></span>
<span id="cb139-11"><a href="transforming-data.html#cb139-11"></a><span class="co">## 59     Adelie    Biscoe           36.5               181        2850 female</span></span>
<span id="cb139-12"><a href="transforming-data.html#cb139-12"></a><span class="co">## 65     Adelie    Biscoe           36.4               184        2850 female</span></span>
<span id="cb139-13"><a href="transforming-data.html#cb139-13"></a><span class="co">## 55     Adelie    Biscoe           34.5               187        2900 female</span></span>
<span id="cb139-14"><a href="transforming-data.html#cb139-14"></a><span class="co">## 99     Adelie     Dream           33.1               178        2900 female</span></span>
<span id="cb139-15"><a href="transforming-data.html#cb139-15"></a><span class="co">## 117    Adelie Torgersen           38.6               188        2900 female</span></span>
<span id="cb139-16"><a href="transforming-data.html#cb139-16"></a><span class="co">##     year</span></span>
<span id="cb139-17"><a href="transforming-data.html#cb139-17"></a><span class="co">## 315 2008</span></span>
<span id="cb139-18"><a href="transforming-data.html#cb139-18"></a><span class="co">## 59  2008</span></span>
<span id="cb139-19"><a href="transforming-data.html#cb139-19"></a><span class="co">## 65  2008</span></span>
<span id="cb139-20"><a href="transforming-data.html#cb139-20"></a><span class="co">## 55  2008</span></span>
<span id="cb139-21"><a href="transforming-data.html#cb139-21"></a><span class="co">## 99  2008</span></span>
<span id="cb139-22"><a href="transforming-data.html#cb139-22"></a><span class="co">## 117 2009</span></span></code></pre></div>
<p>Note, that you can order by increasing (<code>decreasing = FALSE</code>) or decreasing (<code>increasing = TRUE</code>) values of the variable.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="transforming-data.html#cb140-1"></a>row_order  &lt;-<span class="st"> </span><span class="kw">order</span>(penguins<span class="op">$</span>body_mass_g, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>)</span>
<span id="cb140-2"><a href="transforming-data.html#cb140-2"></a></span>
<span id="cb140-3"><a href="transforming-data.html#cb140-3"></a>order_penguins &lt;-<span class="st"> </span>penguins[row_order , ]</span>
<span id="cb140-4"><a href="transforming-data.html#cb140-4"></a></span>
<span id="cb140-5"><a href="transforming-data.html#cb140-5"></a><span class="kw">head</span>(order_penguins)</span>
<span id="cb140-6"><a href="transforming-data.html#cb140-6"></a><span class="co">##     species island bill_length_mm flipper_length_mm body_mass_g  sex year</span></span>
<span id="cb140-7"><a href="transforming-data.html#cb140-7"></a><span class="co">## 170  Gentoo Biscoe           49.2               221        6300 male 2007</span></span>
<span id="cb140-8"><a href="transforming-data.html#cb140-8"></a><span class="co">## 186  Gentoo Biscoe           59.6               230        6050 male 2007</span></span>
<span id="cb140-9"><a href="transforming-data.html#cb140-9"></a><span class="co">## 230  Gentoo Biscoe           51.1               220        6000 male 2008</span></span>
<span id="cb140-10"><a href="transforming-data.html#cb140-10"></a><span class="co">## 270  Gentoo Biscoe           48.8               222        6000 male 2009</span></span>
<span id="cb140-11"><a href="transforming-data.html#cb140-11"></a><span class="co">## 232  Gentoo Biscoe           45.2               223        5950 male 2008</span></span>
<span id="cb140-12"><a href="transforming-data.html#cb140-12"></a><span class="co">## 264  Gentoo Biscoe           49.8               229        5950 male 2009</span></span></code></pre></div>
<p>You can also order a table by multiple variables.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="transforming-data.html#cb141-1"></a>row_order &lt;-<span class="st"> </span><span class="kw">order</span>(penguins<span class="op">$</span>species,</span>
<span id="cb141-2"><a href="transforming-data.html#cb141-2"></a>                   penguins<span class="op">$</span>island,</span>
<span id="cb141-3"><a href="transforming-data.html#cb141-3"></a>                   penguins<span class="op">$</span>body_mass_g)</span>
<span id="cb141-4"><a href="transforming-data.html#cb141-4"></a></span>
<span id="cb141-5"><a href="transforming-data.html#cb141-5"></a>order_penguins &lt;-<span class="st"> </span>penguins[row_order , ]</span>
<span id="cb141-6"><a href="transforming-data.html#cb141-6"></a></span>
<span id="cb141-7"><a href="transforming-data.html#cb141-7"></a><span class="kw">head</span>(order_penguins)</span>
<span id="cb141-8"><a href="transforming-data.html#cb141-8"></a><span class="co">##     species island bill_length_mm flipper_length_mm body_mass_g    sex year</span></span>
<span id="cb141-9"><a href="transforming-data.html#cb141-9"></a><span class="co">## 59   Adelie Biscoe           36.5               181        2850 female 2008</span></span>
<span id="cb141-10"><a href="transforming-data.html#cb141-10"></a><span class="co">## 65   Adelie Biscoe           36.4               184        2850 female 2008</span></span>
<span id="cb141-11"><a href="transforming-data.html#cb141-11"></a><span class="co">## 55   Adelie Biscoe           34.5               187        2900 female 2008</span></span>
<span id="cb141-12"><a href="transforming-data.html#cb141-12"></a><span class="co">## 105  Adelie Biscoe           37.9               193        2925 female 2009</span></span>
<span id="cb141-13"><a href="transforming-data.html#cb141-13"></a><span class="co">## 103  Adelie Biscoe           37.7               183        3075 female 2009</span></span>
<span id="cb141-14"><a href="transforming-data.html#cb141-14"></a><span class="co">## 29   Adelie Biscoe           37.9               172        3150 female 2007</span></span></code></pre></div>
</div>
<div id="combine-tables" class="section level2">
<h2><span class="header-section-number">11.3</span> Combine tables</h2>
<p>You will often find yourself wanting to combine multiple tables together. Sometimes this is because of the way that you collected data in the field, like having multiple forms with multiple tables that make data collection easier. Other times it is probably owing to the fact that you collected some data, then someone else collected some more, and now you need to put the two together. There are two primary ways to do this in R. Which one you should use depends on the circumstances of your data.</p>
<ul>
<li>If you have two tables with the <strong>same variables</strong> but <strong>new observations</strong>, then you will combine the observations or rows of each table together. If you had, for example, gone out a year or two after the initial phases of penguins data collection and measured the same variables as before (flipper length, bill length, and body mass), you would want to ensure that the newly measured values remain <em>bound</em> to the same variables in your original table. This is achieved with <code>rbind()</code>.<br />
</li>
<li>If you have two tables with <strong>new variables</strong> but the <strong>same observations</strong>, then you will combine the variables or columns of each table together. If you had, for example, identified the same penguins during the same years as in the initial phases of penguin data collection and, say, measured their heights in centimeters and the size of their feet in millimeters, you would want to ensure that these values are <em>bound</em> to the same penguins in the same years as your other variables. This is achieved with <code>cbind()</code>.</li>
</ul>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="transforming-data.html#cb142-1"></a>penguins &lt;-<span class="st"> </span><span class="kw">rbind</span>(penguins, new_observations)</span>
<span id="cb142-2"><a href="transforming-data.html#cb142-2"></a></span>
<span id="cb142-3"><a href="transforming-data.html#cb142-3"></a>penguins &lt;-<span class="st"> </span><span class="kw">cbind</span>(penguins, new_variables)</span></code></pre></div>
</div>
<div id="change-variable" class="section level2">
<h2><span class="header-section-number">11.4</span> Change variable</h2>
<p>Sometimes you will want to change the values of a variable. The simple, friendly way to do this involves the <code>transform()</code> function.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="transforming-data.html#cb143-1"></a><span class="co"># single variable</span></span>
<span id="cb143-2"><a href="transforming-data.html#cb143-2"></a>penguins &lt;-<span class="st"> </span><span class="kw">transform</span>(penguins, </span>
<span id="cb143-3"><a href="transforming-data.html#cb143-3"></a>                      <span class="dt">body_mass_g =</span> body_mass_g <span class="op">*</span><span class="st"> </span><span class="dv">10</span>)</span>
<span id="cb143-4"><a href="transforming-data.html#cb143-4"></a></span>
<span id="cb143-5"><a href="transforming-data.html#cb143-5"></a><span class="co"># multiple variables</span></span>
<span id="cb143-6"><a href="transforming-data.html#cb143-6"></a>penguins &lt;-<span class="st"> </span><span class="kw">transform</span>(penguins, </span>
<span id="cb143-7"><a href="transforming-data.html#cb143-7"></a>                      <span class="dt">body_mass_g =</span> <span class="kw">scale</span>(body_mass_g),</span>
<span id="cb143-8"><a href="transforming-data.html#cb143-8"></a>                      <span class="dt">bill_length_mm =</span> <span class="kw">scale</span>(bill_length_mm),</span>
<span id="cb143-9"><a href="transforming-data.html#cb143-9"></a>                      <span class="dt">flipper_length_mm =</span> <span class="kw">scale</span>(flipper_length_mm))</span></code></pre></div>

<div class="rmdnote">
As with <code>subset()</code>, you do not have to quote variable names when referring to them within the <code>transform()</code> function. Again, this is because R knows that you are referring to the variables within the specified table.
</div>

<p>You can achieve the same result with the <code>[</code> and <code>$</code> operators, though in a less elegant way, especially for multiple variables.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="transforming-data.html#cb144-1"></a><span class="co"># bracket operator</span></span>
<span id="cb144-2"><a href="transforming-data.html#cb144-2"></a>penguins[ , <span class="st">&quot;body_mass_g&quot;</span>] &lt;-<span class="st"> </span><span class="kw">scale</span>(penguins<span class="op">$</span>body_mass_g)</span>
<span id="cb144-3"><a href="transforming-data.html#cb144-3"></a>penguins[ , <span class="st">&quot;bill_length_mm&quot;</span>] &lt;-<span class="st"> </span><span class="kw">scale</span>(penguins<span class="op">$</span>bill_length_mm)</span>
<span id="cb144-4"><a href="transforming-data.html#cb144-4"></a>penguins[ , <span class="st">&quot;flipper_length_mm&quot;</span>] =<span class="st"> </span><span class="kw">scale</span>(penguins<span class="op">$</span>flipper_length_mm)</span>
<span id="cb144-5"><a href="transforming-data.html#cb144-5"></a></span>
<span id="cb144-6"><a href="transforming-data.html#cb144-6"></a><span class="co"># dollar operator</span></span>
<span id="cb144-7"><a href="transforming-data.html#cb144-7"></a>penguins<span class="op">$</span>body_mass_g &lt;-<span class="st"> </span><span class="kw">scale</span>(penguins<span class="op">$</span>body_mass_g)</span>
<span id="cb144-8"><a href="transforming-data.html#cb144-8"></a>penguins<span class="op">$</span>bill_length_mm &lt;-<span class="st"> </span><span class="kw">scale</span>(penguins<span class="op">$</span>bill_length_mm)</span>
<span id="cb144-9"><a href="transforming-data.html#cb144-9"></a>penguins<span class="op">$</span>flipper_length_mm =<span class="st"> </span><span class="kw">scale</span>(penguins<span class="op">$</span>flipper_length_mm)</span></code></pre></div>
</div>
<div id="add-variable" class="section level2">
<h2><span class="header-section-number">11.5</span> Add variable</h2>
<p>The <code>transform()</code> function also allows you to append new variables to your table. This is most useful when you want to use other variables in the table to define a new variable. For instance, if we wanted to find the ratio of bill length to body mass for each individual penguin and add that ratio as a new column, we could do this:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="transforming-data.html#cb145-1"></a>original_variables &lt;-<span class="st"> </span><span class="kw">names</span>(penguins)</span>
<span id="cb145-2"><a href="transforming-data.html#cb145-2"></a></span>
<span id="cb145-3"><a href="transforming-data.html#cb145-3"></a><span class="co"># add ratio variable</span></span>
<span id="cb145-4"><a href="transforming-data.html#cb145-4"></a>penguins &lt;-<span class="st"> </span><span class="kw">transform</span>(penguins, </span>
<span id="cb145-5"><a href="transforming-data.html#cb145-5"></a>                      <span class="dt">ratio_bill_mass =</span> bill_length_mm <span class="op">/</span><span class="st"> </span>body_mass_g)</span>
<span id="cb145-6"><a href="transforming-data.html#cb145-6"></a></span>
<span id="cb145-7"><a href="transforming-data.html#cb145-7"></a>new_variables &lt;-<span class="st"> </span><span class="kw">names</span>(penguins)</span>
<span id="cb145-8"><a href="transforming-data.html#cb145-8"></a></span>
<span id="cb145-9"><a href="transforming-data.html#cb145-9"></a><span class="kw">setdiff</span>(new_variables, original_variables)</span>
<span id="cb145-10"><a href="transforming-data.html#cb145-10"></a><span class="co">## [1] &quot;ratio_bill_mass&quot;</span></span></code></pre></div>
<p>The <code>setdiff()</code> function (short for <em>set difference</em>) here is simply asking for the names of variables in the modified penguins table that are <em>not</em> in the original penguins table, so this is just a way of showing that we have in fact added a new variable.</p>
<p>As above, you can achieve the same result with the <code>[</code> and <code>$</code> operators, though again in a far less friendly way.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="transforming-data.html#cb146-1"></a>penguins<span class="op">$</span>ratio_bill_mass &lt;-<span class="st"> </span>penguins<span class="op">$</span>bill_length_mm <span class="op">/</span><span class="st"> </span>penguins<span class="op">$</span>body_mass_g</span>
<span id="cb146-2"><a href="transforming-data.html#cb146-2"></a></span>
<span id="cb146-3"><a href="transforming-data.html#cb146-3"></a>penguins[ , <span class="st">&quot;body_mass_zs&quot;</span>] &lt;-<span class="st"> </span>penguins<span class="op">$</span>bill_length_mm <span class="op">/</span><span class="st"> </span>penguins<span class="op">$</span>body_mass_g</span></code></pre></div>
<p>Using these subset operators can get exceptionally tedious when you want to add many new variables based on values of the original variables.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="transforming-data.html#cb147-1"></a>new_penguins &lt;-<span class="st"> </span><span class="kw">transform</span>(penguins, </span>
<span id="cb147-2"><a href="transforming-data.html#cb147-2"></a>                          <span class="dt">ratio_bill_mass =</span> bill_length_mm <span class="op">/</span><span class="st"> </span>body_mass_g,</span>
<span id="cb147-3"><a href="transforming-data.html#cb147-3"></a>                          <span class="dt">ratio_bill_fipper =</span> bill_length_mm <span class="op">/</span><span class="st"> </span>flipper_length_mm,</span>
<span id="cb147-4"><a href="transforming-data.html#cb147-4"></a>                          <span class="dt">normalized_body_mass =</span> body_mass_g <span class="op">/</span><span class="st"> </span><span class="kw">max</span>(body_mass_g))</span>
<span id="cb147-5"><a href="transforming-data.html#cb147-5"></a></span>
<span id="cb147-6"><a href="transforming-data.html#cb147-6"></a><span class="kw">setdiff</span>(<span class="kw">names</span>(new_penguins), <span class="kw">names</span>(penguins))</span>
<span id="cb147-7"><a href="transforming-data.html#cb147-7"></a><span class="co">## [1] &quot;ratio_bill_fipper&quot;    &quot;normalized_body_mass&quot;</span></span></code></pre></div>
</div>
<div id="aggregate-factors" class="section level2">
<h2><span class="header-section-number">11.6</span> Aggregate factors</h2>
<p>Suppose you want to know the mean body mass of penguins <em>on each island</em> or the median bill length <em>of each species</em>. To find these values, you need a way of summarizing your data relative to one or more groups. To achieve this, R provides the <code>aggregate()</code> function. This is a powerful, albeit quirky, function. The parameters you will mosty likely interact with on a regular basis are these:</p>
<ul>
<li><code>data</code> = the data.frame containing the variable you want to summarize,<br />
</li>
<li><code>formula</code> = an R formula of the form <code>y ~ c1 + c2</code> that specifies the variable (<code>y</code>) to be summarized as a function of one or more factor variables (<code>c1</code>, <code>c2</code>, …, <code>cn</code>), and<br />
</li>
<li><code>FUN</code> = the R function that you use to compute the summary statistic.</li>
</ul>
<p>As a simple case, consider the scenario where we want to get mean body mass for each island.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="transforming-data.html#cb148-1"></a><span class="kw">aggregate</span>(<span class="dt">formula =</span> (body_mass_g <span class="op">~</span><span class="st"> </span>island),</span>
<span id="cb148-2"><a href="transforming-data.html#cb148-2"></a>          <span class="dt">data =</span> penguins,</span>
<span id="cb148-3"><a href="transforming-data.html#cb148-3"></a>          <span class="dt">FUN =</span> mean)</span>
<span id="cb148-4"><a href="transforming-data.html#cb148-4"></a><span class="co">##      island body_mass_g</span></span>
<span id="cb148-5"><a href="transforming-data.html#cb148-5"></a><span class="co">## 1    Biscoe    4716.018</span></span>
<span id="cb148-6"><a href="transforming-data.html#cb148-6"></a><span class="co">## 2     Dream    3712.903</span></span>
<span id="cb148-7"><a href="transforming-data.html#cb148-7"></a><span class="co">## 3 Torgersen    3706.373</span></span></code></pre></div>
<p>And median bill length of each species.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="transforming-data.html#cb149-1"></a><span class="kw">aggregate</span>(<span class="dt">formula =</span> (bill_length_mm <span class="op">~</span><span class="st"> </span>species),</span>
<span id="cb149-2"><a href="transforming-data.html#cb149-2"></a>          <span class="dt">data =</span> penguins,</span>
<span id="cb149-3"><a href="transforming-data.html#cb149-3"></a>          <span class="dt">FUN =</span> median)</span>
<span id="cb149-4"><a href="transforming-data.html#cb149-4"></a><span class="co">##     species bill_length_mm</span></span>
<span id="cb149-5"><a href="transforming-data.html#cb149-5"></a><span class="co">## 1    Adelie          38.80</span></span>
<span id="cb149-6"><a href="transforming-data.html#cb149-6"></a><span class="co">## 2 Chinstrap          49.55</span></span>
<span id="cb149-7"><a href="transforming-data.html#cb149-7"></a><span class="co">## 3    Gentoo          47.30</span></span></code></pre></div>
<p>And, finally, mean body mass for each species on each island.</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="transforming-data.html#cb150-1"></a><span class="kw">aggregate</span>(<span class="dt">formula =</span> (body_mass_g <span class="op">~</span><span class="st"> </span>island <span class="op">+</span><span class="st"> </span>species),</span>
<span id="cb150-2"><a href="transforming-data.html#cb150-2"></a>          <span class="dt">data =</span> penguins,</span>
<span id="cb150-3"><a href="transforming-data.html#cb150-3"></a>          <span class="dt">FUN =</span> mean)</span>
<span id="cb150-4"><a href="transforming-data.html#cb150-4"></a><span class="co">##      island   species body_mass_g</span></span>
<span id="cb150-5"><a href="transforming-data.html#cb150-5"></a><span class="co">## 1    Biscoe    Adelie    3709.659</span></span>
<span id="cb150-6"><a href="transforming-data.html#cb150-6"></a><span class="co">## 2     Dream    Adelie    3688.393</span></span>
<span id="cb150-7"><a href="transforming-data.html#cb150-7"></a><span class="co">## 3 Torgersen    Adelie    3706.373</span></span>
<span id="cb150-8"><a href="transforming-data.html#cb150-8"></a><span class="co">## 4     Dream Chinstrap    3733.088</span></span>
<span id="cb150-9"><a href="transforming-data.html#cb150-9"></a><span class="co">## 5    Biscoe    Gentoo    5076.016</span></span></code></pre></div>

</div>
</div>



<h3>References</h3>
<div id="refs" class="references">
<div id="ref-horst2020palmer">
<p>Horst, Allison Marie, Alison Presmanes Hill, and Kristen B Gorman. 2020. <em>Palmerpenguins: Palmer Archipelago (Antarctica) Penguin Data</em>. <a href="https://allisonhorst.github.io/palmerpenguins/">https://allisonhorst.github.io/palmerpenguins/</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="subsetting-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="empirical-modeling.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["modtheworld.pdf", "modtheworld.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
