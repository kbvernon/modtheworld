# Workspace Management {#workspace-management}

```{r, include = FALSE, echo = FALSE, child = "R/before_chunk.Rmd"}
```

```{r r-menagerie, echo = FALSE, out.width = '100%', fig.cap = "The R Environment"}

knitr::include_graphics("images/r-menagerie.png")

```

## Overview

```{r, echo = FALSE, results = 'asis'}

insert_intro(goal = "To introduce students to the idea of a computing workspace.",
             tldr = "It's just like your kitchen! Keeping it clean won't necessarily make you a great cook, but it will make you a _better_ one.",
             outcomes = c("environments, specifically the workspace,", 
                          "workspace management,",
                          "the working directory,",
                          "absolute and relative file paths,",
                          "directory management, and",
                          "importing and exporting data."),
             datasets = list(),
             requirements = list(c(name = "Chapter 6: R Basics",
                                   url = "#r-basics"),
                                 c(name = "Chapter 8: Vector Types",
                                   url = "#vector-types")),
             readings = list(c(name = "An Introduction to R",
                               url = "https://cran.r-project.org/doc/manuals/r-release/R-intro.html",
                               ref = "[@rcoreteam2020introduction]"),
                             c(name = "Advanced R",
                               url = "https://adv-r.hadley.nz/",
                               ref = "[@Wickham2015advanced]")))

```

Think of the workspace as your kitchen. 

## The Workspace

When we create an object in R, _where does it go_?!!! This is a question that a lot of smart people find themselves asking when first learning R. While the answer is a tad on the esoteric side, it is perhaps useful to peel back the curtain ever so slightly, so you can see what is happening when you create an object in R. To do that, we need to talk about environments, in particular, the "global" environment, which is your default "workspace." You can think of an environment like the workspace as a special sort of named list. 

```{r}

bob <- list(a = 1:5,
            add_one = function(x){ x + 1 },
            b = LETTERS[1:10],
            c = "quotidian",
            d = TRUE)

# coerce list to environment object
digital_zoo <- as.environment(bob)

```

When you create an object, you do not have to go through these steps explicitly for R adds any objects you define to your global environment by default. The key here is just to recognize that when you use `<-`, you are in effect adding an element to a list, the environment list. 

If you want to know what objects currently reside in your workspace, you can try `ls()`, which works like `names()` does for lists, printing the names of its denizens.

```{r}

names(bob)

ls(digital_zoo)

```

Because the global environment is treated as your default workspace, you do not have to specify the environment in the `ls()` call. In the example above, we specify the environment explicitly to emphasize the list-analogy, so that when you call `ls()`, you are doing something very similar to checking the names of a list.  

One other function you might find useful is `ls.str()`. This is a combination of `ls()` and `str()`, which you were introduced to in the previous chapter. This function lists all the elements in the workspace and provides information about their structure.

```{r}

ls.str(digital_zoo)

```

```{block2, type = "rmdnote"}
The information provided by `ls.str()` is more or less what you will find in RStudio's Environment pane, by default the pane in the upper right corner of the RStudio window.  
```



### Workspace Management

As a general rule, you should keep your workspace clean and orderly when conducting any analysis, just as you should keep your kitchen clean and orderly when cooking. There are two big reasons for this. First, it will help prevent careless mistakes (like running operations on the wrong objects or adding a cup of salt when the recipe calls for sugar). It will also make it easier to manage your workflow, to make it more efficient and intelligible. Right now, I have this horrifying image of that college roommate, you know, the one that never does the dishes, leaves food stains on the counter, lets food rot in the fridge, and for some reason you can't quite fathom, spends several weeks conducting an experiment involving molds growing beneath the sink. And now that person is somehow, by some miracle, in charge of - I don't know - Katz's Deli in New York! One shudders at the thought! I mean, talk about a kitchen nightmare. By all that is good, you ought to avoid this. You want to avoid workspace nightmares. 

One way to do that is to regularly remove objects that you will not re-use - meaning, you should banish them from your workspace. This is achieved with the `rm()` or _remove_ function.

```{r}

rm(a, envir = digital_zoo) # read this as: remove object a from the digital zoo environment

ls(digital_zoo)

```

Just as we noted with `ls()`, when you're removing objects from your workspace (and not the toy environment that I just created as an example), it is sufficient to type `rm(<object>)` without specifying the environment, since it defaults to the global environment anyway.  


### Save source!

## Working directory

```{r, echo = FALSE, out.width = "90%", fig.cap = "Leslie has two folders on her computer: (i) scrap_book_folder and (ii) NPS_project_folder. She wants to read the file _data.csv_ into R, but something has gone wrong..."}

knitr::include_graphics("images/r-working_directory.png")

```

Describe the difference between a project directory and a working directory.  

Explain how to identify the current working directory with `getwd()` and then to make the project directory the working directory with `setwd()`.  

A question about reproducible code. To be reproducible, shouldn't it be true that you don't have to change _anything_ in an R script? But what about `setwd()`?  

### File paths

Relative vs absolute file paths.


### Directory management

directory structure

file names


## Data Import and Export

Import and assign! In [R Basics](#r-basics) we learned how to create objects with some staying-power using assignment. Well, when we import data, we typically want it to have some staying power too, so we need to assign it to a name right away.  

